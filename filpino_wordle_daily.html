<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TalaHula - Daily Filipino Word Game</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        // Added updateProfile to imports
        import { getAuth, signInAnonymously, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        // --- FIREBASE CONFIGURATION ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "AIzaSyBKsGf9_qydnsTxOl1tqEa_cPTExkYCrUY", 
            authDomain: "talahula-4384e.firebaseapp.com",
            projectId: "talahula-4384e",
            storageBucket: "talahula-4384e.firebasestorage.app",
            messagingSenderId: "243686926208",
            appId: "1:243686926208:web:3c52bbf254a5ea0937c365"
        };
        
        // Explicitly define the App ID
        const GAME_APP_ID = 'talahula_web_v1';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Expose to window for the game logic to access
        window.db = db;
        window.auth = auth;
        window.appId = GAME_APP_ID;
        window.firestoreFunctions = { doc, getDoc, setDoc, updateDoc, increment };
        window.currentUser = null;

        // Authentication Logic
        const initAuth = async () => {
            try {
                // If not signed in via login.html, do anon sign in
                if (!auth.currentUser) {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Auth error:", error);
            }
        };
        
        initAuth();

        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User connected:", user.uid);
                window.currentUser = user;
                // Dispatch event so game knows auth is ready
                window.dispatchEvent(new Event('userReady'));
            }
        });
        
        // --- IMPROVED: FUNCTION TO SAVE NAME ---
        window.savePlayerName = async function() {
            const nameInput = document.getElementById('player-name-input');
            const newName = nameInput.value.trim();
            const btn = nameInput.nextElementSibling; // The SAVE button

            if (!newName) {
                alert("Please enter a name.");
                return;
            }
            
            // Double check user connection
            const user = window.currentUser || window.auth.currentUser;
            if (!user) {
                alert("Still connecting to server... please wait 2 seconds and try again.");
                return;
            }

            try {
                btn.textContent = "SAVING..."; // Loading state
                btn.disabled = true;
                
                // 1. Save to Database (Priority for Leaderboard)
                // Using setDoc with merge ensures it creates the file if it doesn't exist
                const { doc, setDoc } = window.firestoreFunctions;
                const statsRef = doc(window.db, 'artifacts', window.appId, 'users', user.uid, 'stats', 'daily');
                
                await setDoc(statsRef, { 
                    username: newName,
                    lastUpdated: new Date()
                }, { merge: true });

                // 2. Update Auth Profile (Secondary - might fail on some networks but that's ok)
                try {
                    await updateProfile(user, { displayName: newName });
                    // CRITICAL FIX: Manually update the window object so we don't need to wait for auth listener
                    if(window.currentUser) window.currentUser.displayName = newName;
                } catch (authErr) {
                    console.warn("Profile update warning (safe to ignore):", authErr);
                }

                // 3. CRITICAL FIX: Invalidate Cache in Game Logic
                // This ensures the next time the game saves (e.g. after winning), it fetches the NEW name
                if (window.invalidateStatsCache) {
                    window.invalidateStatsCache();
                }

                // Success UI
                btn.textContent = "OK!";
                btn.style.backgroundColor = "var(--correct-bg)";
                setTimeout(() => {
                    btn.textContent = "SAVE";
                    btn.style.backgroundColor = "";
                    btn.disabled = false;
                }, 2000);
                
                showMessage("Na-save na ang pangalan!");

            } catch (e) {
                console.error("Error saving name:", e);
                btn.textContent = "RETRY";
                btn.disabled = false;
                
                // Show specific error to help debug
                if (e.code === 'permission-denied') {
                    alert("Error: Permission Denied.\n\nYou need to fix your Firestore Rules in the Firebase Console.\nAllow read/write to: artifacts/" + window.appId + "/users/...");
                } else {
                    alert("Error saving: " + e.message);
                }
            }
        };
    </script>

    <style>
    :root {
        /* --- FILIPINO FLAG PALETTE --- */
        --ph-yellow: #f3be12; /* Sun Yellow */
        --ph-blue:   #4773CC; /* Royal Blue */
        --ph-red:    #BF4242; /* Flag Red */
        --ph-white:  #D2D6D8;
        
        /* Wood/Nature Tones */
        --narra-wood: #5D4037;
        --bamboo-light: #D7CCC8;
        
        /* --- THEME PALETTE (Araw/Light) --- */
        --bg-color: #fdf6e3; /* Manila Paper tone */
        --text-color: #3e2723; /* Dark Coffee */
        
        /* Keyboards */
        --key-bg: #efebe9;
        --key-text: #3e2723;
        --border-color: #a1887f; /* Light Wood */
        
        /* --- GAMEPLAY COLORS --- */
        --correct-bg: var(--ph-yellow); 
        --correct-text: #3e2723; /* Added Missing Variable */
        --present-bg: var(--ph-blue); 
        --present-text: #ffffff;
        --absent-bg: var(--ph-red); 
        --absent-text: #ffffff; 
        
        /* UI Elements */
        --modal-bg: rgba(255, 255, 255, 0.98);
        --shadow: 0 4px 6px rgba(0,0,0,0.2);
        --btn-bg: var(--ph-blue); 

        /* Badge Vars (Light) */
        --badge-bg: var(--ph-blue);
        --badge-text: #ffffff;
    }

    [data-theme="dark"] {
        --bg-color: #1a2332; 
        --text-color: #e6e6e6;
        --key-bg: #37474f;
        --key-text: #eceff1;
        --border-color: #546e7a;
        --correct-bg: #FBC02D; 
        --correct-text: #263238; 
        --present-bg: #4285F4; 
        --present-text: #ffffff;
        --absent-bg: #D32F2F; 
        --absent-text: #ffffff;
        --modal-bg: rgba(38, 50, 56, 0.98);
        --btn-bg: #FBC02D;
        
        /* Badge Vars (Dark) */
        --badge-bg: #FBC02D;
        --badge-text: #3e2723;
    }

    [data-theme="dark"] body {
        background-color: var(--bg-color);
        background-image: 
            radial-gradient(circle at 50% 50%, #263238 2px, transparent 2.5px),
            linear-gradient(0deg, transparent 49%, #263238 50%, transparent 51%),
            linear-gradient(90deg, transparent 49%, #263238 50%, transparent 51%);
        background-size: 30px 30px, 60px 60px, 60px 60px;
        background-position: 0 0;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        -webkit-tap-highlight-color: transparent;
    }

    body {
        background-color: #fcf6e6;
        color: var(--text-color);
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100dvh;
        overflow: hidden;
        background-image: 
            linear-gradient(45deg, #e4d5b7 25%, transparent 25%, transparent 75%, #e4d5b7 75%, #e4d5b7),
            linear-gradient(45deg, #e4d5b7 25%, transparent 25%, transparent 75%, #e4d5b7 75%, #e4d5b7);
        background-position: 0 0, 10px 10px;
        background-size: 20px 20px;
    }   

    header {
        width: 100%;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 5px solid;
        border-image: linear-gradient(to right, var(--ph-blue) 33%, var(--ph-red) 33%, var(--ph-red) 66%, var(--ph-yellow) 66%) 1;
        max-width: 600px;
        flex-shrink: 0;
        background-color: var(--bg-color);
        z-index: 10;
    }

    .header-left {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    h1 {
        font-weight: 900;
        letter-spacing: 1px;
        text-transform: uppercase;
        font-size: 1.6rem;
        color: var(--text-color);
    }

    /* Added hover effect for the title link */
    h1 a {
        color: inherit;
        text-decoration: none;
        transition: color 0.3s ease;
    }

    h1 a:hover {
        color: var(--btn-bg); /* This variable is Blue in Light Mode, Yellow in Dark Mode */
    }

    .mode-badge {
            font-size: 0.65rem;
            background-color: var(--ph-blue); 
            color: #ffffff;                   
            padding: 4px 10px;                
            border-radius: 20px;              
            margin-left: 8px;
            text-transform: uppercase;
            font-weight: 800;
            letter-spacing: 0.5px;
            vertical-align: middle;
            position: relative;
            top: -3px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2); 
        }

        [data-theme="dark"] .mode-badge {
            background-color: var(--ph-yellow);
            color: #3e2723;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

    .sun-icon {
        color: #FF9800; /* Changed to a more noticeable orange */
        animation: spin 12s linear infinite;
        display: block;
    }

    .moon-icon {
        color: var(--correct-bg);
        display: none;
    }

    [data-theme="dark"] .sun-icon { display: none; }
    [data-theme="dark"] .moon-icon { display: block; }

    @keyframes spin { 100% { transform: rotate(360deg); } }

    .controls {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .icon-btn {
        background: none;
        border: none;
        cursor: pointer;
        color: var(--text-color);
        padding: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: background-color 0.2s;
    }
    
    .icon-btn:hover {
        background-color: rgba(0,0,0,0.05);
    }
    
    [data-theme="dark"] .icon-btn:hover {
        background-color: rgba(255,255,255,0.1);
    }

    /* Infinite Mode Button Styling - Simplified (No Gradient) */
    .infinite-btn {
        background-color: var(--btn-bg);
        color: white;
        border: none;
        padding: 14px 24px;
        border-radius: 16px;
        font-size: 0.9rem;
        font-weight: 800;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        text-transform: uppercase;
        letter-spacing: 0.8px;
        display: flex;
        align-items: center;
        gap: 6px;
        text-decoration: none;
        justify-content: center;
        border: 2px solid rgba(0,0,0,0.05);
    }
    
    .infinite-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    
    .infinite-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    [data-theme="dark"] .infinite-btn {
        background-color: var(--btn-bg); /* Yellow */
        color: #3e2723; /* Dark text */
        box-shadow: 0 4px 6px rgba(0,0,0,0.4);
    }
    
    [data-theme="dark"] .infinite-btn:hover {
        box-shadow: 0 6px 12px rgba(0,0,0,0.5);
    }

    .theme-switch {
        display: inline-block;
        height: 24px;
        position: relative;
        width: 46px;
    }

    .theme-switch input { display: none; }

    .slider {
        background-color: #ccc;
        bottom: 0;
        cursor: pointer;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        transition: .4s;
        border-radius: 34px;
    }

    .slider:before {
        background-color: white;
        bottom: 3px;
        content: "";
        height: 18px;
        left: 3px;
        position: absolute;
        transition: .4s;
        width: 18px;
        border-radius: 50%;
    }

    input:checked + .slider { background-color: var(--btn-bg); }
    input:checked + .slider:before { transform: translateX(22px); }

    #main-game-area {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center; 
        gap: 2vh; 
        width: 100%;
        overflow-y: auto;
        position: relative; 
        background: radial-gradient(circle, var(--bg-color) 0%, rgba(0,0,0,0) 80%);
    }

    #game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex-grow: 0;
        padding: 0;
        width: 100%;
        max-width: 400px;
        overflow: visible;
    }

    #grid {
        display: grid;
        grid-template-rows: repeat(6, 1fr);
        grid-gap: 5px;
    }

    .row {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        grid-gap: 5px;
    }

    .tile {
        width: 52px;
        height: 52px;
        border: 2px solid var(--border-color);
        background-color: rgba(255,255,255,0.3);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.8rem;
        font-weight: 800;
        text-transform: uppercase;
        user-select: none;
        border-radius: 4px;
    }

    .tile[data-state="filled"] {
        border-color: var(--text-color);
        background-color: var(--bg-color);
        animation: pop 0.1s;
    }

    .tile[data-state="correct"] {
        background-color: var(--correct-bg);
        color: var(--correct-text); 
        border-color: var(--correct-bg);
    }

    .tile[data-state="present"] {
        background-color: var(--present-bg);
        color: var(--present-text);
        border-color: var(--present-bg);
    }

    .tile[data-state="absent"] {
        background-color: var(--absent-bg);
        color: var(--absent-text);
        border-color: var(--absent-bg);
    }

    .tile.flip { animation: flip 0.6s ease; }

    /* --- FIXED: Help Modal Examples --- */
    .example-row {
        display: flex;
        gap: 5px;
        margin: 10px 0 5px 0;
    }
    
    .example-tile {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
        display: flex; 
        justify-content: center;
        align-items: center;
        font-weight: bold;
        
        /* Ensure default state is visible in modal */
        border: 2px solid var(--border-color);
        background-color: transparent; 
        color: var(--text-color);
    }

    /* Force visibility of states in help modal */
    .example-tile[data-state="correct"] {
        background-color: var(--correct-bg) !important;
        color: var(--correct-text) !important;
        border-color: var(--correct-bg) !important;
    }

    .example-tile[data-state="present"] {
        background-color: var(--present-bg) !important;
        color: var(--present-text) !important;
        border-color: var(--present-bg) !important;
    }

    .example-tile[data-state="absent"] {
        background-color: var(--absent-bg) !important;
        color: var(--absent-text) !important;
        border-color: var(--absent-bg) !important;
    }

    #keyboard-area {
        width: 100%;
        max-width: 500px;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-bottom: 10px; 
        flex-shrink: 0;
    }

    #controls-row {
        width: 100%;
        display: flex;
        justify-content: center; 
        padding: 0 10px 10px 10px;
        gap: 10px;
    }

    #hint-btn {
        background-color: transparent; 
        border: none;
        padding: 5px; 
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 44px; 
        min-height: 44px;
        transition: transform 0.1s, opacity 0.3s;
        position: relative; /* Essential for badge positioning */
        overflow: visible;
    }

    #hint-btn:active { transform: scale(0.90); }

    .hint-icon {
        height: 40px; 
        width: auto; 
        display: block;
        pointer-events: none; 
        filter: drop-shadow(1px 1px 0px rgba(0,0,0,0.2));
    }

    /* Badge Style */
    .badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background-color: var(--badge-bg);
        color: var(--badge-text);
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 800;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        pointer-events: none;
        border: 2px solid var(--bg-color); /* Cutout effect against bg */
        z-index: 2;
        transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.3s, color 0.3s;
    }

    /* Pulse animation for updates */
    .badge.pulse {
        transform: scale(1.3);
    }

    /* Empty state */
    .badge.empty {
        background-color: #9e9e9e;
        color: #ffffff;
    }

    #keyboard {
        width: 100%;
        padding: 0 8px;
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .key-row {
        display: flex;
        justify-content: center;
        gap: 4px;
        width: 100%;
    }

    .key {
        font-family: inherit;
        font-weight: bold;
        border: 0;
        padding: 0;
        margin: 0;
        height: 54px; 
        border-radius: 6px;
        cursor: pointer;
        user-select: none;
        background-color: var(--key-bg);
        color: var(--key-text);
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        text-transform: uppercase;
        font-size: 0.9rem;
        touch-action: manipulation;
        box-shadow: 0 2px 0 rgba(0,0,0,0.2);
    }

    .key:active {
        transform: translateY(2px);
        box-shadow: none;
    }

    .key-wide {
        flex: 1.5;
        font-size: 0.8rem;
    }

    .key[data-state="correct"] {
        background-color: var(--correct-bg);
        color: var(--correct-text); 
    }

    .key[data-state="present"] {
        background-color: var(--present-bg);
        color: var(--present-text); 
    }

    .key[data-state="absent"] {
        background-color: var(--absent-bg);
        color: var(--absent-text); 
    }

    @media (max-height: 700px) {
        #main-game-area {
            gap: 5px; 
            justify-content: flex-start; 
            padding-top: 10px;
        }
        .tile {
            width: 40px;
            height: 40px;
            font-size: 1.4rem;
        }
        .key { height: 48px; }
        header { padding: 8px 15px; }
        h1 { font-size: 1.2rem; }
    }

    @media (max-height: 600px) {
        .tile {
            width: 32px;
            height: 32px;
            font-size: 1.2rem;
        }
        .key {
            height: 40px;
            font-size: 0.8rem;
        }
        #hint-btn { padding: 6px 12px; }
    }

    @keyframes pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    @keyframes flip {
        0% { transform: rotateX(0); }
        50% { transform: rotateX(90deg); }
        100% { transform: rotateX(0); }
    }

    @keyframes shake {
        10%, 90% { transform: translateX(-1px); }
        20%, 80% { transform: translateX(2px); }
        30%, 50%, 70% { transform: translateX(-4px); }
        40%, 60% { transform: translateX(4px); }
    }

    .shake { animation: shake 0.5s; }

    #message-container {
        position: fixed;
        top: 75px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        z-index: 1000;
        pointer-events: none;
        width: 90%;
    }

    .toast {
        background-color: var(--text-color);
        color: var(--bg-color);
        padding: 10px 20px;
        border-radius: 5px;
        font-weight: bold;
        opacity: 1;
        transition: opacity 0.3s;
        box-shadow: var(--shadow);
        text-align: center;
        border: 2px solid var(--border-color);
    }

    .toast.fade-out { opacity: 0; }

    /* Unified Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.6); 
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        backdrop-filter: blur(2px);
    }

    .modal-content {
        background-color: var(--modal-bg);
        color: var(--text-color);
        padding: 30px;
        border-radius: 10px;
        box-shadow: var(--shadow);
        max-width: 90%;
        width: 450px;
        text-align: center;
        position: relative;
        border-top: 5px solid var(--ph-blue);
        border-bottom: 5px solid var(--ph-red);
        border-left: 2px solid var(--border-color);
        border-right: 2px solid var(--border-color);
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .close-modal {
        position: absolute;
        top: 10px;
        right: 15px;
        background: none;
        border: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: var(--text-color);
        opacity: 0.6;
    }
    .close-modal:hover { opacity: 1; }

    .modal-content h2 { 
        margin-bottom: 15px; 
        color: var(--ph-blue); 
        font-size: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    [data-theme="dark"] .modal-content h2 { color: var(--ph-yellow); }

    .modal-content p { margin-bottom: 20px; line-height: 1.5; }
    
    .play-btn {
        background-color: var(--btn-bg); 
        color: var(--text-color);
        border: none;
        padding: 12px 24px;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        text-transform: uppercase;
        box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        transition: transform 0.1s;
        text-decoration: none;
        display: inline-block;
        margin: 5px 0;
        min-width: 200px;
    }
    
    .secondary-btn {
        background-color: var(--ph-yellow);
        color: #3e2723;
    }
    [data-theme="dark"] .secondary-btn {
        background-color: var(--ph-blue);
        color: white;
    }
    
    .header-img {
        height: 25px;
        width: auto;
        display: block;
    }
    [data-theme="light"] .play-btn { color: white; }
    [data-theme="light"] .secondary-btn { color: #3e2723; }

    .play-btn:hover { opacity: 0.9; }
    .play-btn:active { transform: scale(0.95); }

    /* Stats Specific Styles */
    .stat-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 25px;
        padding: 0 10px;
        width: 100%;
    }
    .stat-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
    }
    .stat-val {
        font-size: 1.8rem;
        font-weight: 800;
        margin-bottom: 5px;
    }
    .stat-label {
        font-size: 0.65rem;
        text-transform: uppercase;
        font-weight: bold;
        opacity: 0.8;
        text-align: center;
    }
    
    h3.graph-title {
        font-size: 0.9rem;
        text-transform: uppercase;
        margin-bottom: 10px;
        text-align: left;
        font-weight: bold;
        opacity: 0.9;
        width: 100%;
    }

    .graph-container {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 10px;
        align-items: flex-start;
        padding: 0 10px;
        width: 100%;
    }
    .graph-row {
        display: flex;
        width: 100%;
        align-items: center;
        font-size: 0.85rem;
    }
    .graph-label {
        width: 15px;
        font-weight: bold;
    }
    .graph-bar-container {
        flex-grow: 1;
        margin-left: 10px;
        /* background-color: rgba(0,0,0,0.05); */
        border-radius: 2px;
        overflow: hidden;
    }
    .graph-bar {
        background-color: var(--ph-blue);
        color: white;
        text-align: right;
        padding: 3px 6px;
        font-weight: bold;
        min-width: 1.2rem;
        font-size: 0.75rem;
    }
    [data-theme="dark"] .graph-bar {
        background-color: var(--ph-yellow);
        color: #3e2723;
    }
    
    /* Loading Overlay Style */
    #loading-overlay {
        position: absolute;
        top: 0; left: 0; 
        width: 100%; height: 100%;
        background-color: var(--bg-color);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 50;
        font-weight: bold;
        font-size: 1.2rem;
        color: var(--text-color);
        flex-direction: column;
        gap: 15px;
    }

    .loading-spinner {
        display: inline-block;
        width: 30px;
        height: 30px;
        border: 4px solid rgba(0,0,0,0.1);
        border-radius: 50%;
        border-top-color: var(--text-color);
        animation: spin 1s ease-in-out infinite;
    }
    [data-theme="dark"] .loading-spinner {
        border-color: rgba(255,255,255,0.1);
        border-top-color: var(--text-color);
    }
    
    /* NEW: Banner for Infinite Mode */
    .infinite-banner {
        display: none; /* Hidden by default */
        width: 90%;
        max-width: 400px;
        background: linear-gradient(135deg, var(--ph-blue), var(--ph-red));
        color: white;
        padding: 12px;
        border-radius: 8px;
        text-align: center;
        font-weight: bold;
        cursor: pointer;
        margin-bottom: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        animation: pop 0.3s ease-out;
        font-size: 0.9rem;
        z-index: 5;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    [data-theme="dark"] .infinite-banner {
        background: linear-gradient(135deg, var(--ph-yellow), var(--ph-red));
        color: #3e2723;
    }

    .infinite-banner:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
</style>
</head>
<body>

    <header>
        <div class="header-left">
            <svg class="sun-icon" width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 9c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
            </svg>

            <svg class="moon-icon" width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z"/>
            </svg>

            <h1><a href="menu.html">TalaHula</a> <span id="mode-indicator" class="mode-badge">Daily</span></h1>
            <img src="https://flagcdn.com/w40/ph.png" alt="Icon" class="header-img">
        </div>
        
        <div class="controls">
            <!-- Leaderboard Button -->
            <button id="leaderboard-btn" class="icon-btn" onclick="window.location.href='leaderboard.html'" title="Leaderboard">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                     <path d="M4 19h4v-7H4v7zm6 0h4V5h-4v14zm6 0h4v-10h-4v10z"/>
                </svg>
            </button>

            <!-- NEW: How to Play Button (Between Leaderboard and Stats) -->
            <button id="help-btn" class="icon-btn" onclick="openHelpModal()" title="Paano Maglaro">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                </svg>
            </button>

            <button id="stats-btn" class="icon-btn" onclick="openStatsModal()" title="Statistics">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                </svg>
            </button>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider"></div>
                </label>
            </div>
        </div>
    </header>

    <!-- Infinite Mode Button Banner -->
    <div style="width: 100%; max-width: 600px; padding: 8px 20px; display: flex; justify-content: center; background-color: transparent; z-index: 9;">
    <button id="infinite-mode-btn" class="infinite-btn" onclick="window.location.href='filipino_wordle.html'" title="Maglaro ng Infinite">
        ∞ MAG-INFINITE MODE! →
    </button>
</div>
    <div id="message-container"></div>

    <main id="main-game-area">
        <div id="loading-overlay">
            <div class="loading-spinner"></div>
            <div>Naglo-load...</div>
        </div>

        <div id="game-container">
            <div id="grid"></div>
        </div>

        <div id="keyboard-area">
            <div id="controls-row">
                <button id="hint-btn" title="Hint (Pahiwatig)" onclick="getHint()">
                    <span id="hint-count-badge" class="badge">3</span>
                    <svg class="hint-icon" viewBox="0 0 24 24" fill="var(--btn-bg)">
                        <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
                    </svg>
                </button>
            </div>

            <div id="keyboard">
                <div class="key-row" id="row1"></div>
                <div class="key-row" id="row2"></div>
                <div class="key-row" id="row3"></div>
            </div>
        </div>
    </main>

    <div id="modal" class="modal-overlay">
        <div class="modal-content" id="modal-content">
            <button class="close-modal" onclick="closeModal('modal')">&times;</button>
            <h2 id="modal-title">Tapos na!</h2>
            <p id="modal-message"></p>
            
            <button id="view-stats-btn" class="play-btn" onclick="openStatsModal()">Tingnan ang Stats</button>
            
            <a href="filipino_wordle.html" class="play-btn secondary-btn">Maglaro ng Infinite</a>
        </div>
    </div>

    <!-- NEW: HOW TO PLAY MODAL -->
    <div id="help-modal" class="modal-overlay">
        <div class="modal-content" style="text-align: left; align-items: flex-start; max-width: 500px;">
            <button class="close-modal" onclick="closeModal('help-modal')">&times;</button>
            <h2 style="width: 100%; text-align: center; color: var(--text-color);">PAANO MAGLARO</h2>
            <p style="margin-bottom: 10px; color: var(--text-color);">Hulaan ang <strong>TalaHula</strong> sa loob ng 6 na subok.</p>
            <p style="margin-bottom: 10px; color: var(--text-color);">Ang bawat hula ay dapat 6-letra na salitang Filipino. Pindutin ang Enter para ipasa.</p>
            <p style="color: var(--text-color);">Pagkatapos ng bawat hula, magbabago ang kulay ng mga tile upang ipakita kung gaano kalapit ang iyong hula:</p>
            
            <hr style="width:100%; border:0; border-top:1px solid var(--border-color); margin: 15px 0;">

            <p style="font-weight:bold; font-size:0.9rem; color: var(--text-color);">HALIMBAWA</p>

            <div class="example-row">
                <div class="tile example-tile" data-state="correct">T</div>
                <div class="tile example-tile">A</div>
                <div class="tile example-tile">M</div>
                <div class="tile example-tile">A</div>
            </div>
            <p style="font-size: 0.9rem; margin-bottom: 15px; color: var(--text-color);">Ang <strong>T</strong> ay nasa salita at nasa <span style="background-color:var(--correct-bg); color:var(--correct-text); padding: 2px 6px; border-radius: 4px; font-weight:bold;">TAMANG</span> pwesto.</p>

            <div class="example-row">
                <div class="tile example-tile">L</div>
                <div class="tile example-tile" data-state="present">I</div>
                <div class="tile example-tile">K</div>
                <div class="tile example-tile">O</div>
            </div>
            <p style="font-size: 0.9rem; margin-bottom: 15px; color: var(--text-color);">Ang <strong>I</strong> ay nasa salita ngunit nasa <span style="background-color:var(--present-bg); color:var(--present-text); padding: 2px 6px; border-radius: 4px; font-weight:bold;">MALING</span> pwesto.</p>

            <div class="example-row">
                <div class="tile example-tile">M</div>
                <div class="tile example-tile">A</div>
                <div class="tile example-tile">L</div>
                <div class="tile example-tile" data-state="absent">I</div>
            </div>
            <p style="font-size: 0.9rem; color: var(--text-color);">Ang <strong>I</strong> ay <span style="background-color:var(--absent-bg); color:var(--absent-text); padding: 2px 6px; border-radius: 4px; font-weight:bold;">WALA</span> sa salita.</p>
        </div>
    </div>

    <div id="stats-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('stats-modal')">&times;</button>
            
            <!-- NEW: NAME EDITOR FOR EXISTING USERS -->
            <div style="margin-bottom: 20px; width: 100%; border-bottom: 1px solid var(--border-color); padding-bottom: 15px;">
                <label style="font-size: 0.8rem; font-weight:bold; text-transform:uppercase;">Player Name</label>
                <div style="display:flex; gap: 5px; margin-top: 5px;">
                    <input type="text" id="player-name-input" placeholder="Enter Name" maxlength="12" 
                           style="flex-grow:1; padding: 8px; border: 2px solid var(--border-color); border-radius: 4px; font-weight: bold; color: var(--text-color); background: var(--bg-color);">
                    <button onclick="savePlayerName()" class="play-btn" style="padding: 8px 15px; min-width: auto; font-size: 0.8rem; margin:0;">SAVE</button>
                </div>
            </div>
            <!-- ----------------------------------- -->

            <h2>STATISTICS</h2>
            
            <div id="stats-loading" class="loading-spinner" style="display:none; margin: 20px auto;"></div>

            <div class="stat-row">
                <div class="stat-box">
                    <span id="stat-played" class="stat-val">0</span>
                    <span class="stat-label">Played</span>
                </div>
                <div class="stat-box">
                    <span id="stat-win-pct" class="stat-val">0</span>
                    <span class="stat-label">Win %</span>
                </div>
                <div class="stat-box">
                    <span id="stat-current-streak" class="stat-val">0</span>
                    <span class="stat-label">Streak</span>
                </div>
                <div class="stat-box">
                    <span id="stat-max-streak" class="stat-val">0</span>
                    <span class="stat-label">Max</span>
                </div>
            </div>

            <h3 class="graph-title">GUESS DISTRIBUTION</h3>
            <div class="graph-container" id="guess-distribution">
                </div>
        </div>
    </div>

<script type="module">
    // --- Data ---
    const WORD_LENGTH = 6;
    const MAX_GUESSES = 6;
    const GAME_EPOCH = new Date("2024-01-01T00:00:00"); // Base date for daily puzzle
    
    
    const WORD_DATA = [
{ word: "AAMUIN", def: "Gagawing maamo o masunurin; papakitunguhan upang maging hindi mailap o mabangis.", origin: "Mula sa salitang-ugat na 'amó', na tumutukoy sa isang taong may kapangyarihan o awtoridad sa iba.", example: "Aamuin ng tagapag-alaga ang leon bago ito ipakita sa publiko." },
{ word: "AANGAT", def: "Tataas o lilipat paitaas mula sa dating kinalalagyan. Maari ding mangahulugang uunlad o huhusay.", origin: "Mula sa salitang-ugat sa Tagalog na 'angat'", example: "Aangat ang tubig sa ilog kapag patuloy na lumakas ang ulan." },
{ word: "AATRAS", def: "(1) Kikilos palikod. (2) Pag-urong sa isang pasya o plano.", origin: "Mula sa salitang-ugat na 'atras', na nagmula sa salitang Kastila na 'atrás', na nangangahulugang 'paurong' o 'pabalik.'", example: "Aatrás siya sa kasunduan kapag hindi malinaw ang mga kondisyon." },
{ word: "ABANTE", def: "(1) Pasulong; patungo sa unahan. (2) Pagsulong o pag-usad ng isang gawain o kilusan.", origin: "Mula sa salitang Kastila na 'avante' / 'adelante', na nangangahulugang pasulong o paunahan.", example: "Abante ang estudyante sa kaniyang proyekto kaya natapos niya ito bago ang itinakdang oras." },
{ word: "ADHIKA", def: "(1) Layunin o mithiin na nais makamtan. (2) Dahilan ng pagkilos o paninindigan.", origin: "Mula sa Sanskrit na 'adhikāra', na tumutukoy sa karapatan, layunin, o saklaw ng tungkulin; inangkop sa Filipino bilang salitang tumutukoy sa mithiin.", example: "Edukasyon ang adhika niya kaya hindi siya tumitigil sa pag-aaral." },
{ word: "AGIHAN", def: "(1) Pamamahagi ng anumang bagay sa iba. (2) Bahaging natanggap sa pinaghati-hatian.", origin: "Mula sa salitang-ugat sa Tagalog na 'agí'", example: "May agihan ng pagkain sa pista kaya masaya ang lahat." },
{ word: "AGIMAT", def: "(1) Bagay na pinaniniwalaang may kapangyarihang mahika. (2) Anting-anting na nagbibigay proteksiyon o lakas.", origin: "Mula sa salitang Malay na 'azimat', na hiniram naman mula sa wikang Arabo na 'azima'.", example: "May agimat ang bata kaya laging ligtas sa mga aksidente." },
{ word: "ALAALA", def: "(1) Gunita o bakás sa isipan ng nagdaang karanasan. (2) Bagay o pangyayaring hindi malimutan.", origin: "", example: "Masaya ang mga alaala ko ng pista sa baryo." },
{ word: "ALABOK", def: "Pinong-pino at magaan na mga butil ng lupa o dumi na madaling lumipad o kumalat sa hangin.", origin: "Pinaikling bersyon ng 'alikabok'.", example: "Nahahatsing ako sa alabok tuwing naglilinis ako." },
{ word: "ALAGAD", def: "Taong tapat na sumusunod o naglilingkod sa isang pinuno, guro, o ideya; disipulo o tagasunod.", origin: "", example: "Itinuring siyang alágad ng Diyos dahil sa kaniyang tapat na paglilingkod sa kapwa." },
{ word: "ALAHAS", def: "Mga palamuti o ornamentong isinusuot sa katawan tulad ng singsing, kwintas, hikaw, o bracelet.", origin: "Mula sa salitang Kastila na 'alhajas', na hiniram naman mula sa wikang Arabo na 'al-haja' o 'al-hilya'.", example: "Mahilig siya sa mga gintong alahas." },
{ word: "ALAMAT", def: "(1) Kuwentong bayan na nagpapaliwanag sa pinagmulan ng bagay, lugar, o pangyayari. (2) Tradisyunal na salaysay na may aral.", origin: "", example: "Alam ko ang alamat ng pinya kaya alam ko kung bakit ito may maraming mata." },
{ word: "ALAMIN", def: "(1) Magsiyasat upang makuha ang kaalaman. (2) Unawain o tuklasin ang katotohanan.", origin: "Mula sa salitang-ugat na Tagalog na 'alam'.", example: "Alamin mo ang sagot bago itaas ang iyong kamay." },
{ word: "ALARMA", def: "Babala o senyales na nagbibigay-alam sa panganib, oras, o isang mahalagang pangyayari.", origin: "Mula sa salitang Kastila na 'alarma', na hiniram naman mula sa wikang Italyano na 'all’arme'.", example: "Tumunog ang alárma ng bahay nang may pumasok na akyat-bahay." },
{ word: "ALERTO", def: "Pagiging handa, maingat, at mabilis kumilos sa anumang sitwasyon; mataas na antas ng kamalayan o pagbabantay.", origin: "Mula sa salitang Kastila na 'alerta', na hiniram naman mula sa wikang Italyano na 'all’erta'.", example: "Laging alérto ang guwardiya sa pagbabantay sa pinto ng paaralan." },
{ word: "ALISIN", def: "(1) Tanggalin o ihiwalay ang isang bagay. (2) Wakasan o ihinto ang isang kalagayan.", origin: "Mula sa salitang-ugat na Tagalog na 'alis'.", example: "Alisin mo ang dumi sa mesa bago kumain." },
{ word: "ALIPIN", def: "(1) Taong pag-aari at pinaglilingkuran ang amo. (2) Sinumang lubos na napasailalim sa kapangyarihan ng iba.", origin: "", example: "Siya ay alipin ng pag-ibig at tapat sa kaniyang minamahal." },
{ word: "AMIHAN", def: "Hanging nagmumula sa hilagang-silangan. Karaniwang malamig at tuyo, lalo na sa panahon ng taglamig sa Pilipinas.", origin: "", example: "Dahil sa hanging amíhan, malamig ang simoy ng hangin sa bundok ngayong umaga." },
{ word: "APIHIN", def: "Ang sadyang pagtrato sa isang tao nang hindi makatarungan; ang abusuhin o tapakan ang karapatan ng iba.", origin: "Mula sa salitang-ugat na Tagalog na 'apí', na tumutukoy sa pagmamaliit o pagmamaltrato.", example: "Apihin ang mga papel at ilagay sa folder nang maayos." },
{ word: "APUHAP", def: "(1) Maghanap sa pamamagitan ng paghipo, o nang walang malinaw na gabay. (2) Pagsagawa ng kilos nang walang kasiguruhan o nang pakapa-kapa.", origin: "", example: "(1) Ginawa niya ang apuhap upang mahanap ang susi sa madilim na silid. (2) Apuhap niyang tinahak ang daan sa madilim na kagubatan." },
{ word: "BABAAN", def: "Ipinapagawang mas mababa ang antas, halaga, o dami.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Babaan mo naman ang presyo ng iyong mga tinda." },
{ word: "BABABA", def: "(1) Pupunta sa mas mababang lugar. (2) Maging mas mababa ang antas, halaga, o dami.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Bababa ako kapag nailuto na ang pagkain." },
{ word: "BABAGO", def: "Hindi na tutulad sa dati.", origin: "Mula sa salitang-ugat sa Tagalog na 'bago'.", example: "Maraming babágo sa iskedyul ng klase ngayong semester." },
{ word: "BAGKUS", def: "Ginagamit upang ipakita ang kabaligtaran o pagsalungat sa isang ideya o pangungusap; sa halip, sa halip na, o sa kabilang dako.", origin: "", example: "Hindi siya natakot sa hamon; bagkús, mas lalo pa siyang nagpakasipag." },
{ word: "BAGSAK", def: "(1) Malakas at biglaang paghulog mula sa itaas o malaking pagbaba. (2) Hindi pasado, karaniwang tumutukoy sa iskor o grado.", origin: "", example: "Bagsak siya sa pagsusulit kaya kailangan niyang mag-aral nang mabuti para bumawi sa sunod." },
{ word: "BAGWIS", def: "Panakip o balabal sa likod.", origin: "", example: "Malapad ang bagwis ng ibon habang ito’y lumilipad sa umaga." },
{ word: "BAKUNA", def: "Gamot o likido na ini-inject o ibinibigay sa katawan upang maiwasan o labanan ang sakit.", origin: "Mula sa salitang Kastila na 'vacuna'.", example: "Kinakailangan ang bakuna laban sa trangkaso tuwing tag-lamig." },
{ word: "BALIIN", def: "Ipuputol o sisirain ang isang bagay sa pamamagitan ng puwersa.", origin: "Mula sa salitang-ugat sa Tagalog na 'bali'.", example: "Baliin mo ang sanga upang mas madaling dalhin." },
{ word: "BALING", def: "(1) Ang pagliko, pag-ikot, o paglihis ng isang bagay. (2) May pilas, bitak, o sirâ sa istruktura", origin: "", example: "(1) Baling ang bakal kaya kailangan itong ayusin bago gamitin. (2) Ang baling binti niya ay nakabalot ng gipit para gumaling." },
{ word: "BALITA", def: "(1) Ulat tungkol sa naganap na pangyayari. (2) Impormasyong ibinabalita sa publiko.", origin: "Mula sa salitang Malay na 'berita', na nagmula sa wikang Sanskrit na 'vartta'.", example: "May bagong balita tungkol sa kaganapan sa bayan." },
{ word: "BANGAW", def: "Insektong sumisipsip ng dugo ng hayop o tao; malaking langaw.", origin: "", example: "May bangaw sa kusina kaya kailangan nang linisin ang pagkain." },
{ word: "BANTAY", def: "Ang nagmamasid o nag-aalaga sa isang lugar, tao, hayop, o bagay upang masiguro ang kaligtasan o kaayusan.", origin: "", example: "Bantay ang mga guwardiya sa pinto ng paaralan." },
{ word: "BASAIN", def: "Gawing basa o lagyan ng tubig o anumang likido.", origin: "Mula sa salitang-ugat sa Tagalog na 'basâ'.", example: "Basain mo ang lupa bago magtanim ng gulay." },
{ word: "BATLAG", def: "Biglaang pagkatapon o paghulog.", origin: "", example: "May batlag ng bato mula sa taas kaya nag-ingat ang lahat." },
{ word: "BAYANI", def: "Taong nag-alay ng buhay para sa bayan o sinumang kinikilala dahil sa kabayanihan.", origin: "Mula sa salitang Kapampangan na 'bayani'.", example: "Si Rizal ay ang ating pambansang bayani na ginugol ang buhay para sa bayan." },
{ word: "BIGYAN", def: "Magkaloob, magpasa, o mag-abot ng isang bagay.", origin: "Mula sa salitang-ugat sa Tagalog na 'bigay'.", example: "Bigyan mo ako ng pera upang makabili ng mga gamit sa paaralan." },
{ word: "BILANG", def: "(1) Dami, sukat, o numero. (2) Nakapirming dami ng gamit o tao. (3) Kasama o kabilang sa isang pangkat.", origin: "", example: "(1) Bílang ang mga tao rito, kailangan ng sapat na upuan. (2) Limitado ang bilang ng tiket. (3) Biláng estudyante, may tungkulin siyang mag-aral nang mabuti." },
{ word: "BINABA", def: "(1) Ilinagay sa mas mababang lugar. (2) Naging mas mababa ang antas, halaga, o dami.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Bababa siya sa hagdan upang makatulong sa bata." },
{ word: "BINALI", def: "Pinutol, sinira, o pinaluhod ang isang bagay sa pamamagitan ng puwersa.", origin: "Mula sa salitang-ugat sa Tagalog na 'balì'.", example: "Binali niya ang sanga ng puno upang makuha ang prutas." },
{ word: "BINAGO", def: "Pagpapalit ng bagay, tao, o sitwasyon upang hindi maitulad sa dati.", origin: "Mula sa salitang-ugat sa Tagalog na 'bago'.", example: "Binago ko ang aking ugali para sa kaniya." },
{ word: "BINAON", def: "(1) Inilibing o inilagay sa ilalim ng lupa o anumang takip. (2) Nagdala ng bagay upang gamitin sa ibang lugar, karaniwang tumutukoy sa pagkain, pera, o damit.", origin: "Mula sa salitang-ugat sa Tagalog na 'baón' o 'báon'.", example: "(1) Bináon ang bangkay ng alagang aso sa bakuran. (2) Bináon niya ang tinapay sa bag." },
{ word: "BINASA", def: "(1) Tinapos o sinuri ang nakasulat na teksto. (2) Diniit sa tubig o anumang likido kaya naging basa.", origin: "Mula sa salitang-ugat sa Tagalog na 'basâ' o 'bása'.", example: "(1) Binasa niya ang libro bago matulog kagabi. (2) Binasa ng ulan ang aking sapatos kanina." },
{ word: "BINATA", def: "Isang lalaking nasa tamang gulang na pang-adulto ngunit hindi pa kasal; kadalasang tumutukoy sa kabataang lalaki.", origin: "", example: "Siya ay isang binatá na masigasig sa kaniyang pag-aaral." },
{ word: "BINUKA", def: "Inalis ang takip o pinagbukasan.", origin: "Mula sa salitang-ugat sa Tagalog na 'buka', na tumutukoy sa kalagayan ng pagiging bukas o nakaluwag.", example: "Binuka ang pinto upang makapasok ang hangin." },
{ word: "BINURA", def: "Inalis o tinanggal ang nakasulat, guhit, marka, tala, o alaala.", origin: "Mula sa salitang-ugat sa Tagalog na 'bura'.", example: "Binura niya ang maling sagot sa papel bago ito ipasa." },
{ word: "BINUYO", def: "Inudyukan o hinikayat ang isang tao.", origin: "Mula sa salitang-ugat sa Tagalog na 'buyo'.", example: "Binuyo niya ang bata na tumulong sa gawaing bahay." },
{ word: "BITUKA", def: "Organ ng tao o hayop na mahaba at payat na daanan ng pagkain mula sa tiyan patungo sa puwit.", origin: "", example: "Nagkaroon siya ng sakit sa bitúka dahil sa pagkain ng hindi lutong karne." },
{ word: "BUBUKA", def: "Bubukas o magkaroroon ng hiwa, puwang, o pagitan. Maaari ding tumukoy sa pagbukas ng isang bagay nang kusa o natural.", origin: "Mula sa salitang-ugat sa Tagalog na 'buka'.", example: "Bubuka ang mga bulaklak sa hardin sa pagdating ng umaga." },
{ word: "BUGBOG", def: "Pisikal na pananakit sa pamamagitan ng suntok, palo, sipa, o iba pang paraan.", origin: "", example: "Bugbóg ang inabot niya matapos awayin ang kaniyang magulang." },
{ word: "BUKAYO", def: "Matamis na pagkain na gawa sa niyog at asukal.", origin: "", example: "Masarap ang bukayo na gawa sa niyog at asukal." },
{ word: "BUKSAN", def: "(buksán) Ibuka o tanggalin ang takip o harang.", origin: "Mula sa salitang-ugat sa Tagalog na 'bukas'.", example: "Buksan ang kahon upang makita ang laman nito." },
{ word: "BUMABA", def: "(1) Pumunta sa mas mababang lugar. (2) Naging mas mababa ang antas, halaga, o dami.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Bumaba ang presyo ng gulay dahil sa dami ng ani." },
{ word: "BUMASA", def: "Tumingin at umunawa ng nakasulat.", origin: "Mula sa salitang-ugat sa Tagalog na 'bása'.", example: "Bumasa siya ng dyaryo bago mag-almusal." },
{ word: "BUMUKA", def: "Magbukas o magkaroon ng hiwa, puwang, o pagitan. Maaari ding tumukoy sa pagbukas ng isang bagay nang kusa o natural.", origin: "Mula sa salitang-ugat sa Tagalog na 'buka'.", example: "Bumuka ang pinto ng bahay dahil sa malakas na hangin." },
{ word: "BUNTOT", def: "(1) Huling bahagi ng katawan ng hayop, karaniwang mahaba at manipis. (2) Bagay o tao na laging sumusunod.", origin: "", example: "Ang pusa niya ay may mahaba at malambot na buntot." },
{ word: "BUSLOT", def: "Butas o siwang, karaniwang sa tela o bagay.", origin: "", example: "May buslot ang damit kaya kailangan itong tahiin." },
{ word: "BITUIN", def: "(1) Katawang-langit na nagbibigay-liwanag sa gabi. (2) Tanyag na tao. (3) Hugis na may limang patulis na bahagi.", origin: "", example: "(1) Maliwanag ang bituin sa kalangitan kagabi. (2) Siya ay isang bitúin sa larangan ng musika" },
{ word: "DAANAN", def: "Lugar na dinaraanan.", origin: "Mula sa salitang-ugat na Tagalog na “daan”", example: "Ito ang daanan patungo sa palengke." },
{ word: "DADAAN", def: "Lalampas o tutuloy sa isang lugar.", origin: "Mula sa salitang-ugat na Tagalog na “daan”", example: "Dadaan siya rito bukas ng umaga." },
{ word: "DADAKO", def: "Tutungo o pupunta pa lamang sa isang partikular na lugar, direksyon, o paksa.", origin: "Mula sa salitang-ugat na Tagalog na 'dako', na tumutukoy sa isang lugar, direksyon, o lokasyon.", example: "Dadakó ang mga turista sa parke ngayong hapon." },
{ word: "DAGSIN", def: "Hilabigat, puwersa ng grabidad, bigat ng pagbagsak.", origin: "Mula sa salitang Ilokano na 'dagsen'.", example: "Ramdam ang dagsin ng martilyo nang tumama sa bakal." },
{ word: "DALAGA", def: "Babaeng nasa hustong gulang ngunit hindi pa kasal.", origin: "", example: "Mabait ang dalaga na tumulong sa mga bata." },
{ word: "DALIRI", def: "Bahagi ng kamay o paa.", origin: "Mula sa salitang Malay na 'jeriji'.", example: "Masakit ang daliri niya matapos mahulog sa matulis na bagay" },
{ word: "DANTAY", def: "Pagpapatong ng isang binti o hita sa ibabaw ng isang bagay o tao.", origin: "", example: "Nakaupo siya sa silya, dantáy ang paa sa gilid." },
{ word: "DAMHIN", def: "Maramdaman sa isip o damdamin.", origin: "", example: "Damhin mo ang saya ng pagtulong sa kapwa." },
{ word: "DATING", def: "(1) Pagdating o pag-abot sa destinasyon. (2) Pagkakaroon ng impresyon. (3) Nakaraan, dati, o bago.", origin: "", example: "(1) Inaasahan namin ang dating ng mga bisita bago mag tanghali. (2) Ang kaniyang pagpasok ay may dating ng hiwaga. (3) Noong dating araw, madalas tayong maglaro sa kalsada." },
{ word: "DIBDIB", def: "Harapang bahagi ng katawan ng tao.", origin: "", example: "Masakit ang dibdib niya matapos ang matinding trabaho." },
{ word: "DIINAN", def: "Idiin o lagyan ng puwersa o bigat.", origin: "Mula sa salitang-ugat sa Tagalog na 'diin'.", example: "Diinan ang takip ng kahon upang hindi ito mabuksan" },
{ word: "DUMAKO", def: "Pumunta o nagtungo sa isang partikular na lugar, direksyon, o paksa.", origin: "Mula sa salitang-ugat na Tagalog na 'dako', na tumutukoy sa isang lugar, direksyon, o lokasyon.", example: "Dumako siya sa Maynila para magtrabaho." },
{ word: "EKISAN", def: "Tumutukoy sa pag-alis, pagkansela, o pagbura ng isang bagay, pangalan, plano, o usapan.", origin: "Mula sa salitang Kastila na 'equis', na nangangahulugang marka ng pagkakabura o pagkansela.", example: "Ekisan mo na ang pangalan niya sa listahan." },
{ word: "EKSENA", def: "(1) Alinmang tagpo sa isang pelikula o dula. (2) Kapaligirang pinangyarihan ng anuman. (3) Pagpapakita ng matinding emosyon sa pampublikong pook (lalo na kung nakahihiya).", origin: "Mula sa salitang Kastila na 'escena'.", example: "Nakakatawa ang eksena sa pelikula." },
{ word: "GAGAWA", def: "Aksyon o kilos na isasagawa pa lamang, o lilikha ng isang bagay.", origin: "Mula sa salitang-ugat na 'gawâ', na tumutukoy sa paglikha o pagkilos.", example: "Gagawa ako ng adobo bukas." },
{ word: "GALANG", def: "(1) Kagandahang-asal na ipinakikíta sa kapuwa para sa mataas na pagtingin o pagpapahalaga. (2) Pagkilala sa pagkatao o mga karapatan ng sinuman.", origin: "", example: "May galang siya sa matatanda." },
{ word: "GALING", def: "(1) Pagbuti ng karamdaman o muling paglakas ng maysakit. (2) Kahusayan sa isang gawain. (3) Pinagmulan o lugar kung saan nagmula ang isang tao, bagay, o pangyayari.", origin: "", example: "Ipinakita niya ang galing sa sayaw." },
{ word: "GUMAWA", def: "Nailikha na ang bagay.", origin: "Mula sa salitang-ugat na 'gawa', na tumutukoy sa paglikha o pagkilos.", example: "Magaling siya gumawa ng tula." },
{ word: "GINAWA", def: "Ang aksyon o kilos ay naisagawa o naitapos na, o may nailikha na na bagay.", origin: "Mula sa salitang-ugat na 'gawa', na tumutukoy sa paglikha o pagkilos.", example: "Ginawa niya ang tulang ito." },
{ word: "HAGDAN", def: "Hakbang o hanay ng panting para sa pag-akyat o pagbaba.", origin: "", example: "Mataas ang hagdan ng bahay." },
{ word: "HAGWAY", def: "Anyo, hugis, o proporsyon ng isang bagay, tao, o lugar, kadalasang tumutukoy sa pagiging matangkad at balingkinitan.", origin: "", example: "Mahaba ang hagway niya." },
{ word: "HALAGA", def: "(1) Anumang pakinabang na natatamo sa isang bagay. (2) Presyo ng bilihin.", origin: "", example: "May halaga ang oras." },
{ word: "HALATA", def: "Madaling makita, mapansin, o mapagmasdan nang hindi na kailangang ipaliwanag.", origin: "", example: "Halata ang kaniyang tuwa sa kaniyang pagngiti." },
{ word: "HANDOG", def: "Isang bagay, kilos, o alay na ibinibigay bilang regalo, pasasalamat, o parangal.", origin: "", example: "Ang awit ay handog niya para sa kaarawan ng kaibigan." },
{ word: "HANGAD", def: "Isang matinding nais, mithiin, o layuning pinagsisikapang makamit.", origin: "", example: "Tagumpay ang kaniyang hangad sa buhay." },
{ word: "HANGAL", def: "Kakulangan sa maayos na pag-iisip, paghatol, o pagpapasya.", origin: "", example: "Hangal ang taong nagtiwala agad sa sinungaling." },
{ word: "HANGIN", def: "Hindi nakikitang sangkap sa paligid na nalalanghap at nakapagpapalipad ng mga bagay kung malakas.", origin: "", example: "Malakas ang hangin ngayon kaya lumipad ang mga dahon." },
{ word: "HAPLOS", def: "Banayad o mahinahong paghawak o pagdampi gamit ang kamay o daliri.", origin: "", example: "Mahinahon ang kaniyang haplos sa anak niya." },
{ word: "HIBANG", def: "(1) Wala sa maayos na pag-iisip. (2) Labis-labis ang pagkakagusto sa anuman o sinuman", origin: "", example: "Ako ay nahihibang sa kaiisip sa iyo." },
{ word: "HILAGA", def: "Ang panig o direksyon na kabaligtaran ng timog; karaniwang itinuturing bilang itaas sa mapa o compass.", origin: "", example: "Ang Tuguegarao ay matatagpuan sa hilagang bahagi ng Luzon." },
{ word: "HILERA", def: "Isang sunod-sunod o pantay-pantay na pagkakaayos ng mga tao, bagay, o hayop, na karaniwang nasa linya.", origin: "Mula sa salitang Kastila na 'hilera'.", example: "Pagkakasunod-sunod o pagkakahanay ng anuman." },
{ word: "HILING", def: "Pakikiusap o pakikisuyo tungkol sa isang bagay na ibig mangyari o makamtan.", origin: "", example: "Ang tangi kong hiling, hanggang dulo ikaw ang kapiling." },
{ word: "HINUHA", def: "Pagkuha ng, o ang nakuhang konklusyon, ideya, hula, o impormasyon mula sa mga palatandaan o ebidensya.", origin: "", example: "Tama ang kaniyang hinuha tungkol sa pagkawala ng aklat." },
{ word: "HULING", def: "Ang nasa dulong bahagi, yugto, o pagkakataon. Pangwakas sa pagkakasunod-sunod.", origin: "Mula sa salitang-ugat sa Tagalog na 'huli'.", example: "Siya ang huling dumating sa klase ngayong umaga." },
{ word: "HUDYAT", def: "Isang senyales, palatandaan, o indikasyon na nagsasaad ng pangyayari, kilos, o pagbabago.", origin: "", example: "Ang pagtaas ng bandila ay hudyat na magsisimula na ang seremonya." },
{ word: "HUMINA", def: "Bumaba o bumagal ang lakas, dami, o tindi.", origin: "Mula sa salitang-ugat sa Tagalog na 'hina'.", example: "Humíná ang ulan kanina kaya lumabas na ang mga bata sa kanilang mga bahay." },
{ word: "IBABAW", def: "Pinakaitaas o panlabas na bahagi ng isang bagay", origin: "", example: "Malinis ang ibabaw ng mesa kaya pwede na ilagay ang pagkain." },
{ word: "IBAGAY", def: "Iayon, ilapat, o iposisyon nang tama ang isang bagay.", origin: "Mula sa salitang-ugat sa Tagalog na 'bagay'.", example: "Ibagay mo ang libro sa tamang estante." },
{ word: "IBALIK", def: "Ipadala, isauli, o ilagay ang isang bagay sa dati nitong lugar, estado, o posisyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'balik'.", example: "Ibalik mo ang gamit sa lalagyan nito pagkatapos gamitin." },
{ word: "IBIGAY", def: "Ihandog, ipasa, o ilipat ang pagmamay-ari ng isang bagay sa iba.", origin: "Mula sa salitang-ugat sa Tagalog na 'bigay'.", example: "Ibigay mo ito sa nanay mo kapag nakita mo siya." },
{ word: "IBIGIN", def: "Mahalin, kasiyahan, o pag-ukulan ng pagmamahal.", origin: "Mula sa salitang-ugat sa Tagalog na 'ibig', na nangangahulugang nais, hilig, o pagmamahal.", example: "Dapat nating ibigin ang ating sariling bayan." },
{ word: "IBUKAS", def: "Ibuka o tanggalin ang takip o harang.", origin: "Mula sa salitang-ugat sa Tagalog na 'bukas'.", example: "Ibukas mo ang bintana upang pumasok ang hangin." },
{ word: "IBULSA", def: "Ilagay sa bulsa o itago.", origin: "Mula sa salitang-ugat sa Tagalog na 'bulsa'.", example: "Ibulsa mo na ang pera bago nila makita." },
{ word: "IBUTOD", def: "Pinakagitna o pinakaloob.", origin: "", example: "Ang huli naming itinalakay ay ang ibutod ng selula." },
{ word: "IDAWIT", def: "Isama o isali ang isang tao sa isang gawain, usapan, o sitwasyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'dawit'.", example: "Idawít mo ang iyong kapatid sa laro para masaya kayong lahat." },
{ word: "KABTOL", def: "Kagamitang de-kuryente na ginagamit upang buksan o patayin ang daloy ng kuryente sa isang ilaw o aparato.", origin: "", example: "Pinindot niya ang kabtol upang buksan ang ilaw sa silid." },
{ word: "KAHATI", def: "Taong may bahagi o kasamang naghahati sa isang bagay", origin: "Mula sa salitang-ugat sa Tagalog na 'hati'.", example: "Siya ang kahati ko sa gastusin sa proyekto." },
{ word: "KAINAN", def: "Lugar na pinagkakainan o tinutuluyan ng pagkain.", origin: "Mula sa salitang-ugat sa Tagalog na 'kain'.", example: "Nagtipon ang pamilya sa kainan para sa hapunan." },
{ word: "KAININ", def: "Ipinapagawa ang kilos ng pagkain.", origin: "Mula sa salitang-ugat sa Tagalog na 'kain'.", example: "Kainin mo ang gulay para maging malusog ang iyong katawan." },
{ word: "KAKAIN", def: "Gaganap o gagawa ng kilos ng pagkain", origin: "Mula sa salitang-ugat sa Tagalog na 'kain'.", example: "Kakain siya kapag natapos niya ang kaniyang proyekto." },
{ word: "KALIWA", def: "Panig o direksyon na nasa kabilang bahagi ng kanan", origin: "", example: "Pagliko mo ng kalíwa, makikita mo ang simbahan sa dulo ng kalsada." },
{ word: "KANILA", def: "Panghalip na paari na tumutukoy sa pagmamay-ari ng higit sa isang tao o nilalang", origin: "", example: "Kanila ang lupang tinatayuan ng paaralan." },
{ word: "KANINA", def: "Tumutukoy sa sandali o oras na lumipas na.", origin: "", example: "Kanína pa siya naghihintay ang aso niya sa harap ng bahay." },
{ word: "KANINO", def: "Pagtanong kung sino ang may-ari ng o ang tatanggap ng isang bagay.", origin: "", example: "Kanino mo ibinigay ang liham na ito?" },
{ word: "KATOTO", def: "Matalik na kaibigan, karaniwang ginagamit sa kalalakihan.", origin: "Mula sa salitang-ugat sa Tagalog na 'toto'.", example: "Siya ay nakipaglaro sa kaniyang mga katotó sa bakuran." },
{ word: "KAWALI", def: "Isang malalim at bilog na kasangkapang panglutuan, karaniwang gawa sa metal, na ginagamit sa pagprito o pagluluto ng pagkain sa mantika o langis.", origin: "", example: "Nilagyan niya ng mantika ang kawali bago iprito ang itlog." },
{ word: "KINITA", def: "Perang natanggap mula sa isang gawain o trabaho.", origin: "Mula sa salitang-ugat sa Tagalog na 'kita', na tumutukoy sa perang nakuha o nadagdag.", example: "Malaki ang kiníta ko sa pagbenta ng bulaklak ngayong linggo." },
{ word: "KINUHA", def: "Inagaw, pinulot, o inilagay sa sariling pag-aari o kontrol.", origin: "Mula sa salitang-ugat sa Tagalog na 'kuha'.", example: "Kinuha niya ang payong bago umalis sa bahay." },
{ word: "KINAIN", def: "Isinagawa ang kilos ng pagkain.", origin: "Mula sa salitang-ugat sa Tagalog na 'kain'.", example: "Kinain ng kapatid ko ang aking mga kendi." },
{ word: "KUMAIN", def: "Isinagawa ang kilos ng pagkain.", origin: "Mula sa salitang-ugat sa Tagalog na 'kain'.", example: "Kumain muna ako ng almusal bago umalis ng bahay." },
{ word: "KUMITA", def: "Nadagdagan ang pera mula sa isang gawain o trabaho.", origin: "Mula sa salitang-ugat sa Tagalog na 'kita', na tumutukoy sa perang nakuha o nadagdag.", example: "Kumita siya ng pera mula sa pagtuturo ng sipnayan." },
{ word: "KUMUHA", def: "Nang-agaw, namulot, o naglagay ng bagay sa sariling pag-aari o kontrol.", origin: "Mula sa salitang-ugat sa Tagalog na 'kuha'.", example: "Kumuha siya ng lapis bago magsimula ang pagsusulat." },
{ word: "KUSINA", def: "Lugar o silid sa bahay kung saan inihahanda at niluluto ang pagkain.", origin: "Mula sa salitang Kastila na 'cocina', na hiniram mula sa wikang Latin na 'cocina' o 'coquina'.", example: "Nagluto siya ng sinigang sa kusína kaninang umaga." },
{ word: "LABADA", def: "Nalabhang damit ngunit hindi pa naaalmirulan o naplantsa.", origin: "Mula sa salitang Kastila na 'lavada' na nangangahulugang nilabhan.", example: "Nakasampay pa sa labas ang labada kaya gusot-gusot pa ito. Marami pa akong labada kaya hindi muna ako makakalabas." },
{ word: "LABONG", def: "Murang suwí ng kawáyan na ginugulay at inaatsara. ", origin: "", example: "Masarap ang ginataang labong na niluto ni lola kaya mabilis itong naubos sa hapag-kainan." },
{ word: "LAGNAT", def: "Pagkakaroon ng mataas na temperatura, pagbilís ng pulso, atbp. na karaniwang sanhi ng impeksyon sa anumang bahagi ng katawan.", origin: "", example: "Hindi siya pumasok sa paaralan dahil may lagnat siya mula kagabi." },
{ word: "LAKBAY", def: "Pagtúngo sa malayong pook (lalo na upang makipagsapalaran o makakita ng magagandang tanáwin).", origin: "Mula sa salitang Tagalog na 'lakad' na nangangahulugang paglalakad, nilagyan ng hulaping '-bay' bilang anyong pangngalan.", example: "Plano naming gawin ang isang maikling lakbay sa bundok ngayong bakasyon." },
{ word: "LALAKI", def: "(1) Kasarian ng tao o hayop na may bayag at uten. Kaapid ng isang babae. (2) Paglawak, pagdami, o paglala ng bagay, hayop, o konsepto sa paglipas ng panahon.", origin: "Mula sa salitang-ugat sa Tagalog na 'laki' na tumutukoy sa dimensyon, lawak, o sukat ng isang bagay.", example: "Ang lalaki sa larawan ay nakasuot ng asul na damit. Lalaki ang problema kung hindi agad ito mareresolba." },
{ word: "LAMANG", def: "(1) Higit pa o labis kumpara sa iba. (2) Tanging bahagi, o bagay o taong natatangi o naiiba.", origin: "", example: "Masarap ang lamang ng manok sa sopas. Ang natirang tinapay ay para sa akin na lamang." },
{ word: "LAGPAS", def: "(1) Kahigitan sa inaasahang mangyari. (2) Sumobra o nadaanan na ang isang lugar.", origin: "", example: "(1) Lampas na niya ang itinakdang bilang ng pahina na kailangang basahin. (2) Lampas na sa oras ang pag-inom mo ng gamot." },
{ word: "LAMPAS", def: "(1) Kahigitan sa sukat, o dami. (2) Nakaraan na o lumabis sa oras o bilang.", origin: "", example: "(1) Lampas na niya ang itinakdang bilang ng pahina na kailangang basahin. (2) Lampas na sa oras ang pag-inom mo ng gamot." },
{ word: "LANDAS", def: "Daan o rutang dinadaanan patungo sa isang lugar. Direksyon o daloy ng buhay, karera, o desisyon.", origin: "", example: "Maliit ngunit malinaw ang landas patungo sa bundok. Pinili niya ang tamang landas upang makamit ang kaniyang pangarap." },
{ word: "LANYOS", def: "Lambing o pagpapakita ng matinding pagmamahal sa pamamagitan ng malambot na tinig o kilos. Maaari ding tumukoy sa pagsuyo o pag-amo sa isang tao.", origin: "", example: "Hindi matiis ng ina ang lanyos ng kaniyang anak kaya agad niya itong pinagbigyan sa hiling nito." },
{ word: "LIBANG", def: "Pag-aaliw sa sarili upang makalimot sa lungkot, pagod, o pagkainip. Pagbaling ng atensyon sa ibang bagay (distraksyon).", origin: "", example: "Nagbabasa muna siya ng libro bilang libang habang naghihintay sa pagdating ng kaniyang kaibigan. Sinubukan niyang libangin ang sarili sa paghahalaman upang hindi na laging maisip ang mga problema sa trabaho." },
{ word: "LINGID", def: "Hindi alam o hindi batid ng isang tao; nakatago o sekreto.", origin: "", example: "Hindi nanatiling lingid ang katotohanan dahil lumitaw rin ang mga ebidensya pagkalipas ng ilang araw." },
{ word: "LUMABO", def: "Ang pagiging hindi malinaw ng paningin, paligid, o daloy ng isang likido. Maaari ding tumukoy sa paghina ng ugnayan o pag-asa sa isang bagay.", origin: "Mula sa salitang-ugat sa Tagalog na 'labo' na tumutukoy sa kawalan ng linaw.", example: "Lumabo ang tubig sa baha dahil sa mga dumi at putik na sumama sa agos mula sa kabundukan." },
{ word: "LUMAGO", def: "Ang pagiging malabay, madamo, o mabilis na pagdami ng dahon at sanga ng halaman. Maaari ding tumukoy sa pag-unlad o pagyabong ng isang negosyo, kabuhayan, o kaalaman.", origin: "Mula sa salitang-ugat sa Tagalog na 'lago', na nangangahulugang paglaki, paglawak, o pag-usbong.", example: "Mabilis na lumago ang mga itinanim naming gulay dahil sa madalas na pag-ulan nitong nakaraang buwan. Inaasahan ng pamilya na lalong lalago ang kanilang munting sari-sari store dahil sa sipag at tiyaga nila." },
{ word: "LUMAKI", def: "Ang pag-unlad ng sukat, taas, o bigat ng isang tao, hayop, o bagay. Maaari ding tumukoy sa pagtaas ng bilang, halaga, o tindi ng isang sitwasyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'laki' na tumutukoy sa dimensyon, lawak, o sukat ng isang bagay.", example: "Mabilis na lumaki ang bunsong kapatid ni Ana kaya hindi na kasya sa kanya ang mga dati niyang damit. Lumaki ang problema sa trapiko kanina dahil sa nasirang truck sa gitna ng kalsada." },
{ word: "LUMIIT", def: "Naging mas maliit ang sukat, lawak, dami, o antas.", origin: "Mula sa salitang-ugat sa Tagalog na 'liit'.", example: "Lumiit ang bilang ng mga dumalo dahil sa masamang panahon." },
{ word: "LUMOBO", def: "Lumaki o umumbok dahil sa hangin, tubig, o laman. Maaari ding tumukoy sa biglaang pagdami o pagtaas.", origin: "Mula sa salitang-ugat sa Tagalog na 'lobo'.", example: "Lumobo ang kaniyang mga utang dahil sa patong-patong na interes." },
{ word: "MABABA", def: "May maliit na taas, antas, dami, o posisyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Mababa ang presyo ng isda ngayong araw." },
{ word: "MABAIT", def: "Nagtataglay ng kabutihan ng loob, maawain, at marunong makisama sa kapwa. Maaari ding tumukoy sa pagiging masunurin o hindi malikot (madalas gamitin sa bata o hayop).", origin: "Mula sa salitang-ugat sa Tagalog na 'bait' na tumutukoy sa katinuan ng isip, kabutihan, o kagandahang-asal.", example: "Napaka-mabait ng ating bagong kapitbahay dahil lagi siyang nagbabahagi ng ulam sa amin." },
{ word: "MABIGO", def: "Hindi magtagumpay o hindi makamit ang inaasahang layunin, plano, o hangarin; mapurnada.", origin: "Mula sa salitang-ugat sa Tagalog na 'bigo'.", example: "Huwag kang sumuko kahit mabigo ka man muli." },
{ word: "MABINI", def: "Nagpapakita ng kagandahang-asal, kahinhinan, at pagiging pino sa kilos o pananalita. Madalas gamitin upang ilarawan ang isang babaeng mahinhin o isang taong may disiplina sa sarili.", origin: "Mula sa salitang-ugat sa Tagalog na 'bini' na tumutukoy sa pagiging mahinhin, pino, o may pagtitimpi.", example: "Hinangaan ng lahat ang mabini niyang pagkilos habang siya ay nasa entablado." },
{ word: "MAHINA", def: "Kulang sa lakas, tindi, o sigla.", origin: "Mula sa salitang-ugat sa Tagalog na 'hina'.", example: "Mahina ang kaniyang boses kaya hindi ko siya maintindihan." },
{ word: "MAHIYA", def: "Ang makaramdam ng pag-aalinlangan, pagkailang, o pagkapahiya sa harap ng ibang tao. Pagkakaroon ng pakiramdam na tila maliit ang sarili o natatakot mapuna.", origin: "Mula sa salitang-ugat sa Tagalog na 'hiya' na tumutukoy sa damdamin ng paggalang o pagkailang sa kapwa.", example: "Huwag kang mahiya na kumuha ng pagkain dahil espesyal na inihanda iyan para sa inyong mga panauhin." },
{ word: "MAIKSI", def: "Hindi mahaba sa haba, tagal, o sukat.", origin: "Mula sa salitang-ugat sa Tagalog na 'iksi'.", example: "Maíksi lamang ang kanilang bakasyon kaya mas pinahalagahan nila ang bawat sandali." },
{ word: "MAIYAK", def: "Magkaroon ng luha o magsimulang umiyak.", origin: "Mula sa salitang-ugat sa Tagalog na 'iyak'.", example: "Ayaw kong pakinggan muli ang kaniyang boses dahil baka maiyak lamang ako." },
{ word: "MAKITA", def: "Natatanaw o nasasaksihan.", origin: "Mula sa salitang-ugat sa Tagalog na 'kíta'.", example: "Nais ko siyang makita muli." },
{ word: "MALAKI", def: "Tumutukoy sa sukat o lawak na higit kaysa sa karaniwan. Maaari ding mangahulugang mataas na antas, bilang, o kahalagahan.", origin: "Mula sa salitang-ugat sa Tagalog na 'laki' na tumutukoy sa dimensyon, lawak, o sukat ng isang bagay.", example: "May malaki silang bakuran kung saan pwedeng maglaro ang mga bata ng patintero. Isang malaking karangalan para sa aming pamilya ang iyong pagkapanalo sa paligsahan." },
{ word: "MALIGO", def: "Paglinis ng katawan gamit ang tubig at sabon, o ibabad ang sarili sa anumang likido.", origin: "Mula sa salitang-ugat sa Tagalog na 'ligo'.", example: "Gusto ko ulit maligo dahil napawis ako sa paglalaro." },
{ word: "MALIIT", def: "May kakaunti o mababang sukat, dami, o halaga.", origin: "Mula sa salitang-ugat sa Tagalog na 'liit'.", example: "Maliit pa ang aking mga anak." },
{ word: "MAMULA", def: "Magkakaroon ng kulay na pula.", origin: "Mula sa salitang-ugat sa Tagalog na 'pula'.", example: "Halos mamula na ako sa kakatakbo kanina." },
{ word: "MANILA", def: "Ang kabisera at sentro ng ekonomiya, pulitika, at kultura ng Pilipinas. Kilala bilang isa sa mga pinakamatandang lungsod sa bansa na matatagpuan sa baybayin ng Look ng Maynila.", origin: "Mula sa pariralang Tagalog na 'May-nila', kung saan ang 'nila' ay tumutukoy sa halamang nilad (isang uri ng bakawan na may puting bulaklak) na dating sagana sa pampang ng Ilog Pasig.", example: "Maraming makasaysayang gusali at pook ang matatagpuan sa loob ng Intramuros sa Manila." },
{ word: "MANGGA", def: "Isang uri ng prutas na hugis-itlog o hugis-puso, na may dilaw na laman kapag hinog at berde kapag hilaw. Itinuturing na pambansang prutas ng Pilipinas.", origin: "Mula sa salitang Portuges na 'manga', na hiniram naman mula sa wikang Malay na 'mangga', at orihinal na nagmula sa salitang Tamil na 'mankay'.", example: "Masarap isawsaw sa bagoong ang hilaw na mangga lalo na kung ito ay malutong." },
{ word: "MARAMI", def: "Tumutukoy sa malaking bilang, dami, o kantidad ng tao, bagay, o pangyayari. Higit sa sapat o lampas sa iilan.", origin: "Mula sa salitang-ugat sa Tagalog na 'rami' na nangangahulugang dami o bilang.", example: "Maraming tao ang nag-abang sa pagdating ng sikat na banda sa paliparan." },
{ word: "MASAMA", def: "Hindi mabuti, nakapipinsala, o laban sa kagandahang-asal at batas. Maaari ding tumukoy sa hindi magandang pakiramdam ng katawan o may sakit.", origin: "Mula sa salitang-ugat sa Tagalog na 'samâ' (mababa ang bigkas) na tumutukoy sa depekto, kapintasan, o kawalan ng kabutihan.", example: "Masama ang loob niya dahil hindi siya nakasama sa outing ng kaniyang mga kaibigan." },
{ word: "MASAYA", def: "Nagpapakita o nakararamdam ng kagalakan, tuwa, o ligaya. Tumutukoy din sa isang kalagayan o kapaligiran na puno ng sigla at pagdiriwang.", origin: "Mula sa salitang-ugat sa Tagalog na 'saya' na tumutukoy sa damdamin ng kagalakan o lugod.", example: "Napaka-masaya ng aming pamilya noong nagtipon-tipon kami noong nakaraang Pasko." },
{ word: "MATAAS", def: "May higit na taas o antas kumpara sa karaniwan. Maaaring tumukoy sa sukat, posisyon, ranggo, halaga, o antas.", origin: "Mula sa salitang-ugat sa Tagalog na 'taas'.", example: "Mataas ang marka niya sa pagsusulit dahil masipag siyang mag-aral." },
{ word: "MATAWA", def: "Maglabas ng tawa o tumugon sa isang bagay na nakakatawa, maaaring kusa o hindi mapigilan.", origin: "Mula sa salitang-ugat sa Tagalog na 'tawa'.", example: "Hindi niya sinadyang matawa nang matisod ang kaniyang kaibigan." },
{ word: "MATINO", def: "Tumutukoy sa isang tao na may tamang pag-iisip, maayos ang asal, at maaasahan sa mga gawain. Maaari ding mangahulugang maayos, diretso, o walang sira.", origin: "Mula sa salitang-ugat sa Tagalog na 'tino' na nangangahulugang katuwiran, kaayusan, o katalinuhan ng pag-iisip.", example: "Sa kabila ng kaguluhan sa paligid, nanatiling matino ang kaniyang pagpapasya para sa ikabubuti ng lahat." },
{ word: "MAULAN", def: "Kalagayan ng panahon na may madalas o malakas na pagbuhos ng ulan.", origin: "Mula sa salitang-ugat sa Tagalog na 'ulan'.", example: "Maulan ang panahon ngayon kaya magdala ka ng payong." },
{ word: "MAUBOS", def: "Tuluyang mawala o magamit ang lahat ng laman, dami, o bilang ng isang bagay", origin: "Mula sa salitang-ugat sa Tagalog na 'ubos'.", example: "Halos maubos niya ang kaniyang baon sa kakabili ng meryenda." },
{ word: "MIKHAY", def: "Makabagong terminong Tagalog para sa biology o ang pag-aaral tungkol sa mga bagay na may buhay.", origin: "Isang salitang neologism na binuo mula sa pagsasama ng mga salitang 'miktinig' (maliit, sa kontekstong pang-agham) at ang salitang 'buhay'.", example: "Ang paksa namin sa mikhay ngayong araw ay tungkol sa istruktura ng mga cell sa halaman." },
{ word: "MULHAY", def: "Makabagong terminong Filipino para sa biyolohiyang molekular. Pag-aaral ng mga proseso ng buhay sa antas ng mga molekula, tulad ng DNA at protina.", origin: "Mula sa mga salitang 'mula' (molekular o pinagmulan) at 'buhay'.", example: "Ang mga eksperto sa mulhay ang nanguna sa pagbuo ng mga makabagong bakuna laban sa virus." },
{ word: "MUNTIK", def: "Malapit nang mangyari ang isang bagay, ngunit hindi ito natuloy.", origin: "", example: "Ngayon ko lang naisip, muntik na kitang minahal." },
{ word: "NABALI", def: "Aksidenteng naputol o nasira ang isang bagay sa puwersa.", origin: "Mula sa salitang-ugat sa Tagalog na 'bali'.", example: "Nabali ang kaniyang paa matapos siyang madulas sa hagdan." },
{ word: "NABASA", def: "(1) Nadiit sa tubig o anumang likido kaya naging basa. (2) Naintindihan o natapos na tingnan o basahin ang isang nakasulat na teksto.", origin: "Mula sa salitang-ugat sa Tagalog na 'basâ' o 'bása'.", example: "(1) Nabasa ang aking sapatos dahil sa malakas na ulan kanina. (2) Nabasa ko na ang mensaheng ipinadala mo sa akin kagabi." },
{ word: "NAKITA", def: "Napagmasdan o napansin ng mga mata; natagpuan ang isang bagay na hinahanap.", origin: "Mula sa salitang-ugat sa Tagalog na 'kita' na tumutukoy sa biswal na persepsyon.", example: "Nakita ko ang nawawala mong pitaka sa ilalim ng kama." },
{ word: "NAKUHA", def: "Napasakamay ang isang bagay, o naunawaan ang isang konsepto.", origin: "Mula sa salitang-ugat sa Tagalog na 'kuha'.", example: "Nakuha na niya ang kaniyang diploma matapos ang apat na taon ng pag-aaral." },
{ word: "NALIGO", def: "Naglinis ng katawan gamit ang tubig at sabon, o binabad ang sarili sa anumang likido.", origin: "Mula sa salitang-ugat sa Tagalog na 'ligo'.", example: "Naligo kami sa ulan." },
{ word: "NALITO", def: "Nakaramdam ng pagkalito o kawalan ng katiyakan sa dapat gawin o piliin.", origin: "Mula sa katutubong salitang Tagalog na 'lito'.", example: "Nalito siya sa dami ng mga direksyon kaya siya naligaw ng daan." },
{ word: "NALUWA", def: "Nailabas mula sa bibig ang laman nito; nakadura o nasuka.", origin: "Mula sa salitang-ugat sa Tagalog na 'luwa'.", example: "Naluwa niya ang pagkain dahil sa matinding ubo." },
{ word: "NAMULA", def: "Nagkaroon ng kulay na pula.", origin: "Mula sa salitang-ugat sa Tagalog na 'pula'.", example: "Namula na siya sa kakatawa." },
{ word: "NARITO", def: "Pagiging nasa lugar na malapit sa nagsasalita. Nagpapahayag ng presensya o lokasyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'rito'.", example: "Narito na ang mga dokumentong kailangan para sa pagpupulong." },
{ word: "NASAMA", def: "(1) Nakasama o naging bahagi ng isang grupo, lakad, o pangyayari. (2) Naging masama ang kalagayan, asal, o bunga ng isang pangyayari; napahamak.", origin: "Mula sa salitang-ugat sa Tagalog na 'sáma' o 'samâ'.", example: "(1) Nasama siya sa mga napiling mag-aaral para sa paligsahan. (2) Nasama ang plano namin dahil sa biglaang pagbabago ng panahon." },
{ word: "NASUOT", def: "Nailagay o naisaklob sa katawan ang damit, sapatos, o anumang kasuotan.", origin: "Mula sa salitang-ugat sa Tagalog na 'suot'.", example: "Nasuót niya ang bagong sapatos kahit masikip pa ito." },
{ word: "NAUTAS", def: "Natapos, nawakasan, o napatay, madalas gamitin sa panitikan para sa pagtatapos ng buhay o isang ugnayan.", origin: "Mula sa salitang-ugat sa Tagalog na 'utas', na nangangahulugang tapos o patay.", example: "Nautas ang kaniyang hininga matapos ang mahabang pakikipaglaban sa sakit." },
{ word: "NAWALA", def: "Hindi na makita, naglaho, o hindi na matagpuan sa dati nitong kinalalagyan.", origin: "Mula sa katutubong salitang Tagalog na 'wala'.", example: "Biglang nawala ang kaba ko nang makita ko ang aking pamilya sa madla." },
{ word: "NGIPIN", def: "Ang matitigas na bahagi sa loob ng bibig na ginagamit sa pagnguya ng pagkain.", origin: "Mula sa Proto-Austronesian na '*nipen' na naging 'ngipin' sa Tagalog.", example: "Masakit ang kaniyang ngipin kaya kailangan niyang pumunta sa dentista." },
{ word: "NILAAN", def: "Itinalaga, rineserba, o ibinigay ang isang bagay para sa isang tao, layunin, o gawain.", origin: "Mula sa salitang-ugat sa Tagalog na 'laan'.", example: "Nilaan niya ang kaniyang mga talento sa pagtulong sa komunidad." },
{ word: "OBARYO", def: "Bahagi ng sistemang reproduktibo ng babae na gumagawa ng itlog at hormone.", origin: "Mula sa salitang Kastila na 'ovario'.", example: "Ang obaryo ay may mahalagang tungkulin sa kalusugan at reproduktibong kakayahan ng babae." },
{ word: "OBHETO", def: "Anumang bagay na materyal o natutukoy ng mga pandamdam.", origin: "Mula sa salitang Kastila na 'objeto'.", example: "Hinawakan ni Maria nang maingat ang obheto na itinuro ng guro." },
{ word: "PAALAM", def: "Pahayag ng paghihiwalay o pamamaalam.", origin: "Mula sa salitang-ugat sa Tagalog na 'alam'.", example: "Nagbigay siya ng paalam sa kaniyang mga guro bilang tanda ng paggalang at pasasalamat." },
{ word: "PABABA", def: "Patungo sa mas mababang posisyon, dami, o antas.", origin: "Mula sa salitang-ugat sa Tagalog na 'babâ'.", example: "Pababa nang pababa na naman ang iyong mga marka." },
{ word: "PAKPAK", def: "Bahagi ng katawan ng ibon, insekto, o iba pang hayop na ginagamit sa paglipad o paggalaw sa hangin.", origin: "", example: "Kung may mga pakpak lang sana ako, lumipad na ako papunta sa iyo." },
{ word: "PANALI", def: "Bagay na ginagamit upang maitali o pagdugtungin ang mga bagay.", origin: "Pinaikling bersyon ng 'pang-tali'.", example: "Naputol ang panáli ng bangka kaya inanod ito ng alon." },
{ word: "PANALO", def: "Nagtagumpay sa isang laban o gawain.", origin: "", example: "Panalo ang proyekto sapagkat tumugon ito sa tunay na pangangailangan ng komunidad." },
{ word: "PANSIT/PANCIT", def: "Pagkaing gawa sa bihon o pansit na may sahog.", origin: "Mula sa salitang Hokkien na 'pan-sit' o 'pian e sit'.", example: "Inihanda ang pansit sa handaan bilang sagisag ng mahabang buhay at patuloy na biyaya." },
{ word: "PANGIT/PANGET", def: "Hindi kaaya-ayang tingnan.", origin: "", example: "Hindi dapat husgahan ang isang tao bilang pangit batay lamang sa anyo, sapagkat higit na mahalaga ang kaniyang asal." },
{ word: "PANSIN", def: "Pagbibigay-tuon o atensyon.", origin: "", example: "Nakuha ng pananaliksik ang pansin ng mga eksperto dahil sa lalim ng pagsusuri nito." },
{ word: "PANTIG", def: "Yunit ng pagbigkas sa pagsasalita.", origin: "", example: "Ang salitang Pilipinas ay may apat na pantig: Pi-li-pi-nas." },
{ word: "PINASA", def: "(1) Ibinigay o ipinadala sa iba. (2) Nagbigay ng pasadong marka.", origin: "Mula sa salitang-ugat sa Tagalog na 'pása'.", example: "(1) Kahapon ko pa pinasa ang aking proyekto. (2) Hindi ko siya pinasa dahil sa masama niyang ugali." },
{ word: "PINTOR", def: "Taong gumuguhit o nagpipintura.", origin: "Mula sa salitang Latin na 'pinctor' o 'pictor'.", example: "Ginamit ng pintor ang kaniyang likha upang ilarawan ang kalagayan ng lipunang kaniyang ginagalawan." },
{ word: "PRUTAS", def: "Bunga ng halaman na karaniwang kinakain.", origin: "Mula sa salitang Kastila na 'frutas'.", example: "Ang regular na pagkain ng prutas ay mahalaga sa pagpapanatili ng mabuting kalusugan." },
{ word: "SAKUNA", def: "Malubhang pangyayari o kalamidad na nagdudulot ng pinsala, kapahamakan, o perwisyo.", origin: "Mula sa salitang Sanskrit na 'sakuna'.", example: "Kailangan nating maghanda para sa anumang darating na sakuna." },
{ word: "SALITA", def: "Pinakamaliit na yunit ng wika na may kahulugan.", origin: "Mula sa salitang Malay na 'cerita', na mula sa wikang Sanskrit na 'carita'.", example: "Ang wastong paggamit ng salita ay mahalaga sa malinaw at epektibong komunikasyon. " },
{ word: "SASARA", def: "Matatakpan o mahaharangan ng takip ang anumang nakabukas.", origin: "Mula sa salitang-ugat sa Tagalog na 'sara', na mula sa wikang Kastila na 'cerrar', na mula sa salitang Latin na 'serrare'.", example: "Sasara na ang pintuan ng simbahan pagkatapos ng misa." },
{ word: "SINARA", def: "Kusang tinakpan o hinarangan ng takip ang anumang nakabukas.", origin: "Mula sa salitang-ugat sa Tagalog na 'sara', na mula sa wikang Kastila na 'cerrar', na mula sa salitang Latin na 'serrare'.", example: "Sinara ko agad ang pinto pagpasok sa bahay." },
{ word: "SINING", def: "Malikhaing pagpapahayag ng damdamin at ideya.", origin: "", example: "Ang sining ay nagsisilbing salamin ng kultura at kasaysayan ng isang lipunan." },
{ word: "SUKLAY", def: "Kagamitang may ngipin na ginagamit sa pag-ayos ng buhok.", origin: "", example: "Ginamit niya ang suklay bago pumasok sa paaralan. " },
{ word: "SUNDAN", def: "Gawin ang kilos ng pagsunod o paghabol.", origin: "Mula sa salitang-ugat sa Tagalog na 'sunod'.", example: "Sundan mo ang iyong kapatid para masigurado ang kaniyang kaligtasan." },
{ word: "SUNDIN", def: "Gawin o tuparin ang utos, alituntunin, tagubilin, o payo", origin: "Mula sa salitang-ugat sa Tagalog na 'sunod'.", example: "Sundin mo ang payo ng iyong mga magulang." },
{ word: "TAGLAY", def: "Mayroong katangian o kakayahan.", origin: "", example: "Mayroon siyang taglay na talino at sipag na nakakamangha." },
{ word: "TALAAN", def: "Listahan o rekord ng mga bagay, pangyayari, o impormasyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'talâ'.", example: "Gumawa siya ng talaan ng mga estudyante sa klase." },
{ word: "TANONG", def: "Pahayag na humihingi ng kasagutan.", origin: "", example: "Ang bawat tanong sa talakayan ay nagbubukas ng mas malalim na pag-unawa sa paksa." },
{ word: "TAPANG", def: "Katangian ng pagiging matatag sa harap ng panganib.", origin: "", example: "Ipinamalas ng mamamayan ang tapang sa pagtatanggol ng kanilang karapatan." },
{ word: "TINAGO", def: "Tinakpan o linagay ang isang bagay upang hindi ito makita.", origin: "Mula sa salitang-ugat sa Tagalog na 'tagò'.", example: "Tinagó niya ang regalo sa ilalim ng kama upang maging sorpresa sa kaarawan." },
{ word: "TIWALA", def: "Paniniwala sa katapatan at kakayahan ng iba", origin: "Impluwensiyang Espanyol (confianza sa diwa)", example: "Ang tiwala ay pundasyon ng matibay na ugnayan sa loob ng isang komunidad." },
{ word: "TINOLA", def: "Sabaw na may manok at luya", origin: "", example: "Ang tinola ay karaniwang inihahain bilang simbolo ng pag-aaruga sa pamilya. " },
{ word: "TULONG", def: "Pagbibigay ng saklolo o suporta", origin: "", example: "Ang tulong na ibinibigay nang bukal sa loob ay nagdudulot ng tunay na pagbabago." },
{ word: "UBUSAN", def: "Kuhanin, gamitin, o agawan ang lahat ng laman, dami, o bilang ng isang bagay.", origin: "Mula sa salitang-ugat sa Tagalog na 'ubos'.", example: "Agahan mong pumila dahil ubusan na agad ng tickets bukas." },
{ word: "UBUSIN", def: "Kuhanin o gamitin ang lahat ng laman, dami, o bilang ng isang bagay.", origin: "Mula sa salitang-ugat sa Tagalog na 'ubos'.", example: "Ubusin mo naman ang pagkain mo." },
{ word: "UMAHON", def: "(1) Umaakyat o lumilitaw mula sa mas mababang lugar patungo sa mas mataas. (2) Bumangon mula sa kahirapan, problema, o masamang kalagayan.", origin: "Mula sa salitang-ugat sa Tagalog na 'ahon', na nangangahulugang pag-akyat o pagbangon.", example: "Unti-unting umahón ang kanilang pamilya mula sa matinding kahirapan sa kanilang sipag at pagtitiyaga." },
{ word: "UMALIS", def: "Lumisan o magtungo sa ibang lugar.", origin: "Mula sa salitang-ugat sa Tagalog na 'alis'.", example: "Umalis siya sa kanilang lalawigan upang humanap ng mas maayos na kabuhayan." },
{ word: "UMAWIT", def: "Kumanta o nagpahayag ng damdamin o mensahe sa pamamagitan ng tinig at himig.", origin: "Mula sa salitang-ugat sa Tagalog na 'awit'.", example: "Umawit siya sa harap ng klase bilang bahagi ng kanilang pagtatanghal." },
{ word: "UMIBIG", def: "Nagmahal o nagkaroon ng pag-ibig.", origin: "Mula sa salitang-ugat sa Tagalog na 'ibig', na nangangahulugang nais, hilig, o pagmamahal.", example: "Natatakot na akong umibig muli." },
{ word: "UMINOM", def: "Lumagok o nagkonsumo ng inumin, gamot, o anumang likido.", origin: "Mula sa salitang-ugat sa Tagalog na 'inom'.", example: "Uminom agad siya ng gamot nang malaman na nilalagnat siya." },
{ word: "UMIWAS", def: "Lumihis o lumayo mula sa isang bagay, tao, o sitwasyon.", origin: "Mula sa salitang-ugat sa Tagalog na 'iwas'.", example: "Umiwas siya sa sagupaan ng mga aso sa kanilang bakuran." },
{ word: "UMIYAK", def: "Maglabas ng luha dahil sa emosyon, sakit, kalungkutan, o tuwa.", origin: "Mula sa salitang-ugat sa Tagalog na 'iyak'.", example: "Umiyak ang bata dahil nawala ang kaniyang paboritong laruan." },
{ word: "UMPISA", def: "Simula o panimulang bahagi ng isang bagay, gawain, pangyayari, o panahon.", origin: "Mula sa salitang Kastila na 'empezar', na nangangahulugang pagsisimula.", example: "Ako ay tahimik lamang sa umpisa." },
{ word: "UMULAN", def: "Bumuhos o pumatak ang tubig-ulan mula sa kalangitan.", origin: "Mula sa salitang-ugat sa Tagalog na 'ulan'.", example: "Umulan kagabi kaya basa ang lahat ng halaman sa bakuran." },
{ word: "UMUSAD", def: "Lumipat ang posisyon patungo sa sunod na pupuntahan, o umayos ang kalagayan pagkatapos ng isang pangyayari.", origin: "Mula sa salitang-ugat sa Tagalog na 'usad', na nangangahulugang galaw na pasulong.", example: "Natutuhan niyang umusad at magsimulang umibig muli." },
{ word: "UTUSAN", def: "Bigyan ng atas o gawain.", origin: "Mula sa salitang-ugat sa Tagalog na 'utos'.", example: "Ang utusan ng pinuno ay inaasahang tutupad sa gawain nang may pananagutan." },
{ word: "UUNLAD", def: "Magkakaroon ng pag-angat sa kalagayan, katayuan, kabuhayan, o kakayahan.", origin: "Mula sa salitang-ugat sa Tagalog na 'unlad'.", example: "Uunlad ang kanilang negosyo sa tulong ng bagong estratehiya at sipag ng mga empleyado." },
];

    let VALID_GUESSES = [
  "AAMUIN", "AANGAT", "AATRAS", "ABANTE", "ADHIKA", "AGIHAN", "AGIMAT", "ALAALA", 
  "ALABOK", "ALAGAD", "ALAHAS", "ALAMAT", "ALAMIN", "ALARMA", "ALERTO", "ALISIN", 
  "ALIPIN", "AMIHAN", "APIHIN", "APUHAP",
  "BABAAN", "BABABA", "BABAGO", "BAGKUS", "BAGSAK", "BAGWIS", "BAKUNA", "BALIIN", 
  "BALING", "BALITA", "BANGAW", "BANGUS", "BANTAY", "BASAIN", "BATLAG", "BAYANI", 
  "BIGOTE", "BIGYAN", "BILANG", "BINABA", "BINAGO", "BINALI", "BINAON", "BINASA", 
  "BINATA", "BINUKA", "BINURA", "BINUYO", "BITUKA", "BITUIN", "BUBUKA", "BUGBOG", 
  "BUKAYO", "BUKSAN", "BUMABA", "BUMASA", "BUMUKA", "BUNTOT", "BUSLOT",
  "DAANAN", "DADAAN", "DADAKO", "DAGSIN", "DALAGA", "DALIRI", "DAMHIN", "DANTAY", 
  "DATING", "DIBDIB", "DIINAN", "DUMAKO",
  "EKISAN", "EKSENA",
  "GAGAWA", "GALANG", "GALING", "GINAWA", "GUMAWA",
  "HAGDAN", "HAGWAY", "HALAGA", "HALATA", "HANDOG", "HANGAD", "HANGAL", "HANGIN", 
  "HAPLOS", "HIBANG", "HILAGA", "HILERA", "HILING", "HINUHA", "HUDYAT", "HULING", 
  "HUMINA",
  "IBABAW", "IBAGAY", "IBALIK", "IBIGAY", "IBIGIN", "IBUKAS", "IBULSA", "IBUTOD", 
  "IDAWIT", "IDIKIT", "IGAPOS", "IHAGIS", "IKAHON", "IKALAT", "IKANTA", "IKAPAT", 
  "IKATLO", "IKOPYA", "ILABAS", "ILAGAY", "ILAGDA", "ILAPAG", "ILAPIT", "ILAWAN", 
  "ILUGAR", "IMIKAN", "INAAMO", "INALAM", "ININOM", "INITAN", "INITIN", "INUBOS", 
  "INUMAN", "INUMIN", "IPASOK", "ISAULI", "ISAYAW", "ISIGAN", "ISIGAW", "ISUGAL", 
  "ISUKAT", "ISULAT", "ISUPOT", "ITAPAT", "ITUSOK", "IWANAN",
  "KABTOL", "KAHATI", "KAINAN", "KAININ", "KAKAIN", "KALIWA", "KANILA", "KANINA", 
  "KANINO", "KATOTO", "KAWALI", "KINAIN", "KINITA", "KINUHA", "KUMAIN", "KUMITA", 
  "KUMUHA", "KUSINA",
  "LABADA", "LABONG", "LAGNAT", "LAGPAS", "LAKBAY", "LALAKI", "LAMANG", "LAMPAS", 
  "LANDAS", "LANYOS", "LIBANG", "LINGID", "LUMABO", "LUMAGO", "LUMAKI", "LUMAYO", 
  "LUMIIT", "LUMOBO",
  "MABAIT", "MABABA", "MABIGO", "MABINI", "MAHINA", "MAHIYA", "MAIKSI", "MAIYAK", 
  "MAKITA", "MALAKI", "MALIGO", "MALIIT", "MAMULA", "MANGGA", "MANILA", "MARAMI", 
  "MASAMA", "MASAYA", "MATAAS", "MATAWA", "MATINO", "MAUBOS", "MAULAN", "MIKHAY", 
  "MULHAY", "MUNTIK",
  "NABALI", "NABASA", "NABIGO", "NAIYAK", "NAKITA", "NAKUHA", "NALIGO", "NALITO", 
  "NALUWA", "NAMULA", "NARITO", "NASAMA", "NASUOT", "NATAWA", "NAUBOS", "NAUTAS", 
  "NAWALA", "NGIPIN", "NILAAN",
  "OBARYO", "OBHETO",
  "PAALAM", "PAHINA", "PAIYAK", "PAKPAK", "PAKUHA", "PANALI", "PANALO", "PANCIT", 
  "PANGET", "PANGIT", "PANSIN", "PANSIT", "PANTIG", "PANUOS", "PATUKA", "PAUBOS", 
  "PINASA", "PINTOR", "PITAKA", "PRUTAS", "PUNTOS", "PUSONG",
  "SAGING", "SAHING", "SAKSAK", "SAKUNA", "SAKWIL", "SALAPI", "SALITA", 
  "SASARA", "SILANG", "SIMULA", "SINAMA", "SINARA", "SINDAK", "SINING", "SINUKA", 
  "SINUOT", "SUKLAY", "SULONG", "SUMITA", "SUNDAN", "SUNDIN", "SURIIN",
  "TABLAY", "TADYAK", "TAGLAY", "TAKWIL", "TALAAN", "TALIMA", "TAMAAN", "TANONG", 
  "TAPANG", "TINAAS", "TINAGO", "TINOLA", "TINURO", "TIWALA", "TIYAGA", "TUKLAS", 
  "TULIIN", "TULONG", "TUMAWA", "TUMUKA", "TUMULI",
  "UBUSAN", "UBUSIN", "UMAHON", "UMALIS", "UMAWIT", "UMIBIG", "UMIKSI", "UMINOM", 
  "UMIWAS", "UMIYAK", "UMPISA", "UMULAN", "UMUSAD", "UNAHIN", "UTUSAN", "UUNLAD"
];
async function loadDictionary() {
    console.log("Fetching dictionary from Firestore...");
    const { doc, getDoc } = window.firestoreFunctions; 
    
    // This points to the collection seen in your screenshot
    const docRef = doc(window.db, "wordleWords", "sixLetters");

    try {
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
            const data = docSnap.data();
            if (data.words && Array.isArray(data.words)) {
                // Convert the words from Firestore to UPPERCASE
                const firestoreWords = data.words.map(w => w.toUpperCase());
                
                // Overwrite the existing list with the new one
                VALID_GUESSES = firestoreWords;
                
                console.log(`Dictionary updated! Loaded ${VALID_GUESSES.length} words.`);
            }
        } else {
            console.log("No dictionary document found!");
        }
    } catch (error) {
        console.error("Error getting dictionary:", error);
    }
}
loadDictionary();

    // --- State ---
    let secretWord = "";
    let secretDef = "";
    let currentGuess = "";
    let guesses = []; 
    let isGameOver = false;
    let loading = true;
    let cachedStats = null;
    
    // --- EXPOSE CACHE INVALIDATION FOR SCRIPT 1 ---
    window.invalidateStatsCache = () => {
        console.log("Invalidating stats cache to force refresh...");
        cachedStats = null;
    };
    
    let hintCount = 0;
    const MAX_HINTS = 3;

    // --- DOM Elements ---
    const gridEl = document.getElementById("grid");
    const keyboardEl = document.getElementById("keyboard");
    const messageContainer = document.getElementById("message-container");
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modal-title");
    const modalMessage = document.getElementById("modal-message");
    const statsModal = document.getElementById("stats-modal");
    const themeToggle = document.getElementById("checkbox");
    const modeBadge = document.getElementById("mode-indicator");
    const loadingOverlay = document.getElementById("loading-overlay");

    // --- Initialization ---
    function initGame() {
        currentGuess = "";
        isGameOver = false;
        
        const todayIndex = getDailyIndex();
        const dailyEntry = WORD_DATA[todayIndex % WORD_DATA.length];
        secretWord = dailyEntry.word;
        secretDef = dailyEntry.def;
        modeBadge.textContent = "Daily";

        modal.style.display = "none";
        buildGrid();
        buildKeyboard(); 
        updateHintBadge(); // Init badge

        const storedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', storedTheme);
        themeToggle.checked = storedTheme === 'dark';
    }

    function getDailyIndex() {
        const msPerDay = 86400000;
        const now = new Date();
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        const diff = today - GAME_EPOCH;
        return Math.floor(diff / msPerDay);
    }

    // --- FIREBASE SYNC LOGIC ---
    async function syncGameState() {
        if (!window.currentUser) return;
        
        const todayIndex = getDailyIndex();
        const { doc, getDoc } = window.firestoreFunctions;
        const gameRef = doc(window.db, 'artifacts', window.appId, 'users', window.currentUser.uid, 'dailyGames', todayIndex.toString());
        
        try {
            const snapshot = await getDoc(gameRef);
            
            if (snapshot.exists()) {
                const data = snapshot.data();
                console.log("Found cloud game state, loading...");
                guesses = data.guesses || [];
                isGameOver = data.isGameOver || false;
                
                // Load saved hint count
                hintCount = data.hintCount || 0; 
            } else {
                console.log("No cloud game state found. New game.");
                guesses = [];
                isGameOver = false;
                currentGuess = "";
                hintCount = 0; // Reset for new game
            }
            
            updateHintBadge(); // Update badge after loading
            restoreFullGameState();
            
        } catch (e) {
            console.error("Error syncing game state:", e);
        } finally {
            loading = false;
            loadingOverlay.style.display = 'none';
        }
    }

    function restoreFullGameState() {
        clearGridUI();
        buildKeyboard(); // Reset keyboard colors
        document.getElementById("modal").style.display = "none";

        if (guesses.length > 0) {
            guesses.forEach(g => restoreRow(g));
        }
        
        if (isGameOver) {
            setTimeout(() => showEndScreen(guesses[guesses.length-1] === secretWord), 500);
        }
    }

    async function saveGameStateToCloud() {
        if (!window.currentUser) return;
        
        const todayIndex = getDailyIndex();
        const { doc, setDoc } = window.firestoreFunctions;
        const gameRef = doc(window.db, 'artifacts', window.appId, 'users', window.currentUser.uid, 'dailyGames', todayIndex.toString());
        
        try {
            await setDoc(gameRef, {
                guesses: guesses,
                isGameOver: isGameOver,
                hintCount: hintCount,
                lastUpdated: new Date()
            }, { merge: true });
        } catch (e) {
            console.error("Error saving game state to cloud:", e);
        }
    }

    window.addEventListener('userReady', syncGameState);

    // --- UI Building ---
    function buildGrid() {
        gridEl.innerHTML = "";
        for (let i = 0; i < MAX_GUESSES; i++) {
            const row = document.createElement("div");
            row.className = "row";
            for (let j = 0; j < WORD_LENGTH; j++) {
                const tile = document.createElement("div");
                tile.className = "tile";
                tile.id = `tile-${i}-${j}`;
                row.appendChild(tile);
            }
            gridEl.appendChild(row);
        }
    }

    function clearGridUI() {
        const tiles = document.querySelectorAll('.tile');
        tiles.forEach(t => {
            t.textContent = "";
            t.removeAttribute("data-state");
            t.classList.remove("flip");
        });
    }

    function buildKeyboard() {
        keyboardEl.innerHTML = "";
        const layout = [
            "QWERTYUIOP",
            "ASDFGHJKL",
            "ZXCVBNM"
        ];
        
        layout.forEach((rowKeys, rowIndex) => {
            const rowEl = document.createElement("div");
            rowEl.className = "key-row";
            
            if (rowIndex === 2) {
                const enterKey = createKey("ENTER");
                enterKey.classList.add("key-wide");
                rowEl.appendChild(enterKey);
            }

            for (let char of rowKeys) {
                rowEl.appendChild(createKey(char));
            }

            if (rowIndex === 2) {
                const backKey = createKey("⌫");
                backKey.classList.add("key-wide");
                backKey.onclick = handleDelete; 
                backKey.setAttribute('data-key', 'BACKSPACE');
                rowEl.appendChild(backKey);
            }
            
            keyboardEl.appendChild(rowEl);
        });
    }

    function createKey(char) {
        const btn = document.createElement("button");
        btn.className = "key";
        btn.textContent = char;
        btn.setAttribute("data-key", char);
        btn.onclick = () => handleInput(char === "⌫" ? "BACKSPACE" : char);
        return btn;
    }

    // --- Input Handling ---
    document.addEventListener("keydown", (e) => {
        if (isGameOver || loading) return;
        if (document.getElementById("stats-modal").style.display === "flex") return;
        
        const key = e.key.toUpperCase();
        if (key === "ENTER") handleInput("ENTER");
        else if (key === "BACKSPACE") handleInput("BACKSPACE");
        else if (/^[A-Z]$/.test(key)) handleInput(key);
    });

    function handleInput(key) {
        if (isGameOver || loading) return;

        if (key === "ENTER") {
            submitGuess();
        } else if (key === "BACKSPACE") {
            if (currentGuess.length > 0) {
                currentGuess = currentGuess.slice(0, -1);
                updateGrid();
            }
        } else {
            if (currentGuess.length < WORD_LENGTH) {
                currentGuess += key;
                updateGrid();
            }
        }
    }

    function handleDelete() {
        handleInput("BACKSPACE");
    }

    function updateGrid() {
        const row = guesses.length;
        for (let i = 0; i < WORD_LENGTH; i++) {
            const tile = document.getElementById(`tile-${row}-${i}`);
            tile.textContent = currentGuess[i] || "";
            
            if (currentGuess[i]) {
                tile.setAttribute("data-state", "filled");
            } else {
                tile.removeAttribute("data-state");
            }
        }
    }

    // --- Game Logic ---
    function submitGuess() {
        if (currentGuess.length !== WORD_LENGTH) {
            showMessage("Kulang sa letra!");
            shakeRow();
            return;
        }

        const isValidGuess = VALID_GUESSES.includes(currentGuess) || 
                             WORD_DATA.some(e => e.word === currentGuess);

        if (!isValidGuess) {
             showMessage("Wala sa listahan!");
             shakeRow();
             return;
        }

        guesses.push(currentGuess);
        saveGameStateToCloud();
        revealResult();
    }

    function revealResult() {
        const row = guesses.length - 1;
        const guess = guesses[row];
        
        let checkWord = secretWord.split("");
        let guessArr = guess.split("");
        let states = Array(WORD_LENGTH).fill("absent");

        // First pass: Correct
        for (let i = 0; i < WORD_LENGTH; i++) {
            if (guessArr[i] === checkWord[i]) {
                states[i] = "correct";
                checkWord[i] = null;
                guessArr[i] = null;
            }
        }

        // Second pass: Present
        for (let i = 0; i < WORD_LENGTH; i++) {
            if (guessArr[i] && checkWord.includes(guessArr[i])) {
                states[i] = "present";
                checkWord[checkWord.indexOf(guessArr[i])] = null;
            }
        }

        // Animate tiles
        for (let i = 0; i < WORD_LENGTH; i++) {
            setTimeout(() => {
                const tile = document.getElementById(`tile-${row}-${i}`);
                tile.classList.add("flip");
                tile.setAttribute("data-state", states[i]);
                updateKeyColor(guess[i], states[i]);
            }, i * 250);
        }

        setTimeout(() => {
            if (guess === secretWord) {
                isGameOver = true;
                saveGameStateToCloud();
                handleGameEnd(true);
            } else if (guesses.length === MAX_GUESSES) {
                isGameOver = true;
                saveGameStateToCloud();
                handleGameEnd(false);
            } else {
                currentGuess = "";
            }
        }, WORD_LENGTH * 250);
    }

    async function handleGameEnd(isWin) {
        showEndScreen(isWin);
        await saveStatsToFirebase(isWin, guesses.length);
    }

    function restoreRow(guess) {
        let checkWord = secretWord.split("");
        let guessArr = guess.split("");
        let states = Array(WORD_LENGTH).fill("absent");
        const row = guesses.indexOf(guess);

        for (let i = 0; i < WORD_LENGTH; i++) {
            if (guessArr[i] === checkWord[i]) {
                states[i] = "correct";
                checkWord[i] = null;
                guessArr[i] = null;
            }
        }
        for (let i = 0; i < WORD_LENGTH; i++) {
            if (guessArr[i] && checkWord.includes(guessArr[i])) {
                states[i] = "present";
                checkWord[checkWord.indexOf(guessArr[i])] = null;
            }
        }

        for (let i = 0; i < WORD_LENGTH; i++) {
            const tile = document.getElementById(`tile-${row}-${i}`);
            tile.textContent = guess[i];
            tile.setAttribute("data-state", states[i]);
            updateKeyColor(guess[i], states[i]);
        }
    }

    function updateKeyColor(char, state) {
        const keyBtn = document.querySelector(`button[data-key="${char}"]`);
        if(!keyBtn) return;
        
        const currentState = keyBtn.getAttribute("data-state");
        
        if (state === 'correct') {
            keyBtn.setAttribute("data-state", "correct");
        } else if (state === 'present' && currentState !== 'correct') {
            keyBtn.setAttribute("data-state", "present");
        } else if (state === 'absent' && currentState !== 'correct' && currentState !== 'present') {
            keyBtn.setAttribute("data-state", "absent");
        }
    }

    function showEndScreen(isWin) {
        const title = isWin ? "Panalo!" : "Talo!";
        let msg = "";
        
        if (isWin) {
            msg = `Ang salita ay: <b style="color: var(--ph-blue); font-size: 1.3em;">${secretWord}</b><br><br>` +
                  `<strong style="color: var(--ph-yellow); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">Kahulugan:</strong><br>` +
                  `<i style="color: var(--ph-blue); font-weight:600; font-size: 0.95em;">"${secretDef}"</i>`;
        } else {
            msg = `Sayang! Ang tamang salita ay <b style="color: var(--ph-red); font-size: 1.3em;">${secretWord}</b>.<br><br>` +
                  `<strong style="color: var(--ph-yellow); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">Kahulugan:</strong><br>` +
                  `<i style="color: var(--text-color); font-size: 0.95em;">"${secretDef}"</i>`;
        }
        
        // Add origin if available (from WORD_DATA)
        const todayIndex = getDailyIndex();
        const dailyEntry = WORD_DATA[todayIndex % WORD_DATA.length];
        const origin = dailyEntry.origin || "";
        const example = dailyEntry.example || "";
        
        if (origin && origin.trim()) {
            msg += `<br><br><strong style="color: var(--ph-red); text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">Pinagmulan:</strong><br>` +
                   `<i style="color: var(--text-color); font-size: 0.9em; opacity: 0.9;">${origin}</i>`;
        }
        
        if (example && example.trim()) {
            msg += `<br><br><strong style="color: var(--ph-blue); text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">Halimbawa:</strong><br>` +
                   `<i style="color: var(--text-color); font-size: 0.9em; opacity: 0.9;">"${example}"</i>`;
        }

        modalTitle.textContent = title;
        modalMessage.innerHTML = msg;
        modal.style.display = "flex";
    }

    window.closeModal = function(id) {
        document.getElementById(id).style.display = "none";
        // --- NEW: If closing the main modal and game is over, show banner ---
        if (id === 'modal' && isGameOver) {
            const banner = document.getElementById('infinite-banner');
            if (banner) banner.style.display = 'block';
        }
    }

    function updateHintBadge() {
        const badge = document.getElementById('hint-count-badge');
        const remaining = Math.max(0, MAX_HINTS - hintCount);
        if (badge) {
            // Animation handling
            if (badge.textContent !== remaining.toString()) {
                 badge.classList.remove('pulse');
                 void badge.offsetWidth; // trigger reflow
                 badge.classList.add('pulse');
            }
            
            badge.textContent = remaining;
            
            if (remaining === 0) {
                badge.classList.add('empty');
                document.getElementById('hint-btn').style.opacity = '0.5';
            } else {
                badge.classList.remove('empty');
                badge.style.backgroundColor = ''; // Clear inline to let CSS vars work
                document.getElementById('hint-btn').style.opacity = '1';
            }
        }
    }

    function getHint() {
        if (isGameOver) return;
        
        // --- ADDED LIMIT CHECK ---
        if (hintCount >= MAX_HINTS) {
            showMessage(`Naubos na ang iyong hints! (${MAX_HINTS}/${MAX_HINTS})`);
            return;
        }

        // --- INCREMENT AND SAVE ---
        hintCount++;
        saveGameStateToCloud();
        updateHintBadge(); // Update badge UI

        // --- HINT 3: DEFINITION ---
        if (hintCount === MAX_HINTS) {
            showMessage(`Hint (3/3): Kahulugan - "${secretDef}"`);
            return;
        }

        // --- HINT 1 & 2: RANDOM LETTER ---
        let knownIndices = new Set();
        guesses.forEach(g => {
            for(let i=0; i<WORD_LENGTH; i++) {
                if(g[i] === secretWord[i]) knownIndices.add(i);
            }
        });

        let availableIndices = [];
        for(let i=0; i<WORD_LENGTH; i++) {
            if(!knownIndices.has(i)) availableIndices.push(i);
        }

        if (availableIndices.length === 0) {
            // Fallback (should normally not be reached if game isn't over)
            showMessage(`Hint (${hintCount}/${MAX_HINTS}): Alam mo na ang lahat ng letra!`);
            return;
        }

        const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
        const letter = secretWord[randomIndex];
        showMessage(`Hint (${hintCount}/${MAX_HINTS}): Ang ika-${randomIndex + 1} na letra ay "${letter}"`);
    }

    // Expose getHint to window so the HTML button can find it
    window.getHint = getHint;

    function showMessage(msg) {
        const toast = document.createElement("div");
        toast.className = "toast";
        toast.textContent = msg;
        messageContainer.prepend(toast);
        
        setTimeout(() => {
            toast.classList.add("fade-out");
            toast.addEventListener("transitionend", () => toast.remove());
        }, 3000);
    }
    window.showMessage = showMessage;

    function shakeRow() {
        const row = document.querySelector(`#grid .row:nth-child(${guesses.length + 1})`);
        if(row) {
            row.classList.add("shake");
            row.addEventListener("animationend", () => row.classList.remove("shake"));
        }
    }

    themeToggle.addEventListener('change', function(e) {
        if (e.target.checked) {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
        } else {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
        }
    });

    // --- FIREBASE STATS LOGIC ---
    
    // Default stats structure
    const DEFAULT_STATS = {
        played: 0,
        wins: 0,
        currentStreak: 0,
        maxStreak: 0,
        lastPlayedIndex: -1,
        lastWonIndex: -1,
        distribution: { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0 }
    };

    async function fetchStats() {
        if (!window.currentUser) {
            console.log("No user authenticated, returning default stats");
            return { ...DEFAULT_STATS };
        }
        if (cachedStats) return cachedStats;

        try {
            const { doc, getDoc, setDoc } = window.firestoreFunctions;
            const statsRef = doc(window.db, 'artifacts', window.appId, 'users', window.currentUser.uid, 'stats', 'daily');
            const docSnap = await getDoc(statsRef);

            let stats = { ...DEFAULT_STATS };
            if (docSnap.exists()) {
                stats = { ...DEFAULT_STATS, ...docSnap.data() };
            }

            // --- STREAK CORRECTION LOGIC ---
            const todayIndex = getDailyIndex();
            // If the last win was BEFORE yesterday (todayIndex - 1), the streak is broken.
            // Example: Today is 10. Last win was 8. 8 < 9. Streak broken.
            // If last win was 9. 9 < 9 is false. Streak kept.
            if (stats.currentStreak > 0 && stats.lastWonIndex < todayIndex - 1) {
                console.log("Streak broken! Resetting...");
                stats.currentStreak = 0;
                
                // Update DB immediately so leaderboard is accurate
                setDoc(statsRef, { currentStreak: 0 }, { merge: true }).catch(console.error);
            }
            // -------------------------------

            console.log("Stats loaded successfully:", stats);
            cachedStats = stats;
            return cachedStats;

        } catch (e) {
            console.error("Error fetching stats:", e);
            return { ...DEFAULT_STATS };
        }
    }

    async function saveStatsToFirebase(isWin, guessCount) {
        if (!window.currentUser) return;

        const todayIndex = getDailyIndex();
        let stats = await fetchStats();
        
        if (stats.lastPlayedIndex === todayIndex) return;

        stats.played += 1;
        
        if (isWin) {
            stats.wins += 1;
            stats.distribution[guessCount] = (stats.distribution[guessCount] || 0) + 1;
            
            // Streak Calculation
            if (stats.lastWonIndex === todayIndex - 1) {
                stats.currentStreak += 1;
            } else {
                stats.currentStreak = 1;
            }
            stats.lastWonIndex = todayIndex;

            if (stats.currentStreak > stats.maxStreak) {
                stats.maxStreak = stats.currentStreak;
            }
        } else {
            stats.currentStreak = 0;
        }
        
        // --- IMPROVED USERNAME SAVING ---
        if (!stats.username && window.currentUser.displayName) {
             stats.username = window.currentUser.displayName;
        } else if (!stats.username) {
             stats.username = "Player " + window.currentUser.uid.substring(0, 5).toUpperCase();
        }
        // --------------------------------

        stats.lastPlayedIndex = todayIndex;
        cachedStats = stats;

        try {
            const { doc, setDoc } = window.firestoreFunctions;
            const statsRef = doc(window.db, 'artifacts', window.appId, 'users', window.currentUser.uid, 'stats', 'daily');
            await setDoc(statsRef, stats);
        } catch (e) {
            console.error("Error saving stats:", e);
        }
    }

    // UPDATE: Pre-fill name in stats modal
    window.openStatsModal = async function() {
        const statsModal = document.getElementById("stats-modal");
        const loading = document.getElementById("stats-loading");
        // Select content elements to fade/unfade
        const content = document.querySelectorAll("#stats-modal .stat-box, #stats-modal h3, #guess-distribution, #stats-modal .graph-title");
        
        // 1. Show Modal & Loading State
        statsModal.style.display = "flex";
        document.getElementById("modal").style.display = "none";
        document.getElementById("help-modal").style.display = "none";
        
        loading.style.display = "block";
        content.forEach(el => el.style.opacity = "0.3");
        
        try {
            // 2. Wait for Auth (Max 3 seconds to prevent infinite hanging)
            if (!window.currentUser) {
                const timeout = 3000; 
                const startTime = Date.now();
                await new Promise((resolve) => {
                    const checkAuth = () => {
                        if (window.currentUser || Date.now() - startTime > timeout) {
                            resolve();
                        } else {
                            setTimeout(checkAuth, 100);
                        }
                    };
                    checkAuth();
                });
            }
            
            // 3. Pre-fill name input if available
            if (window.currentUser && window.currentUser.displayName) {
                const nameInput = document.getElementById('player-name-input');
                if(nameInput) nameInput.value = window.currentUser.displayName;
            }

            // 4. Fetch Data
            const stats = await fetchStats();

            // 5. Update UI Numbers
            document.getElementById("stat-played").textContent = stats.played || 0;
            const winPct = stats.played > 0 ? Math.round((stats.wins / stats.played) * 100) : 0;
            document.getElementById("stat-win-pct").textContent = winPct;
            document.getElementById("stat-current-streak").textContent = stats.currentStreak || 0;
            document.getElementById("stat-max-streak").textContent = stats.maxStreak || 0;

            // 6. Update Distribution Graph
            const distContainer = document.getElementById("guess-distribution");
            distContainer.innerHTML = "";
            
            // Safety check for distribution object
            const dist = stats.distribution || DEFAULT_STATS.distribution;
            const values = Object.values(dist);
            const maxVal = Math.max(...values, 1); 
            
            for (let i = 1; i <= MAX_GUESSES; i++) {
                const count = dist[i] || 0;
                // Min width 7% so bar is visible even if small
                const percentage = Math.max((count / maxVal) * 100, 7); 
                
                const row = document.createElement("div");
                row.className = "graph-row";
                row.innerHTML = `
                    <div class="graph-label">${i}</div>
                    <div class="graph-bar-container">
                        <div class="graph-bar" style="width: ${count > 0 ? percentage : 7}%">${count}</div>
                    </div>
                `;
                distContainer.appendChild(row);
            }

        } catch (error) {
            console.error("Critical error in stats modal:", error);
        } finally {
            // 7. ALWAYS Hide Loading Spinner (The Safety Net)
            loading.style.display = "none";
            content.forEach(el => el.style.opacity = "1");
        }
    }

    // New Function for Help Modal
    window.openHelpModal = function() {
        document.getElementById("help-modal").style.display = "flex";
        document.getElementById("modal").style.display = "none";
        document.getElementById("stats-modal").style.display = "none";
    }

    initGame();

</script>
</body>
</html>
